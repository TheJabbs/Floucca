(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291],{54067:function(t,e,r){Promise.resolve().then(r.bind(r,4961))},4961:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return o}});var n=r(57437);r(2265);var a=r(41247);function o(t){let{children:e}=t;return(0,n.jsx)(a.e,{children:e})}},44578:function(t,e,r){"use strict";function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36e5;try{let r=localStorage.getItem("".concat(t,"_timestamp"));if(!r)return!1;let n=parseInt(r,10);return Date.now()-n<e}catch(t){return console.error("Error checking cache validity:",t),!1}}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36e5;try{if(!n(t,e))return null;let r=localStorage.getItem(t);if(!r)return null;return JSON.parse(r)}catch(t){return console.error("Error retrieving from cache:",t),null}}function o(t,e){try{let r="".concat(t,"_timestamp");localStorage.setItem(t,JSON.stringify(e)),localStorage.setItem(r,Date.now().toString())}catch(t){console.error("Error saving to cache:",t)}}function c(t){try{let e="".concat(t,"_timestamp");localStorage.removeItem(t),localStorage.removeItem(e)}catch(t){console.error("Error removing from cache:",t)}}r.d(e,{TK:function(){return a},cW:function(){return o},kI:function(){return n},nZ:function(){return c}})},41247:function(t,e,r){"use strict";r.d(e,{P:function(){return i},e:function(){return l}});var n=r(57437),a=r(2265),o=r(5108),c=r(53301);let s=(0,a.createContext)(void 0);function i(){let t=(0,a.useContext)(s);if(!t)throw Error("useFormsData must be used within a FormsDataProvider");return t}function l(t){let{children:e}=t,r=(0,c.N)(o.Z7,"flouca_form_gears"),a=(0,c.N)(o.XZ,"flouca_form_species"),i=(0,c.N)(o.LH,"flouca_form_ports"),l=async()=>{await Promise.all([r.refetch(),a.refetch(),i.refetch()])},u=r.isLoading||a.isLoading||i.isLoading,f=r.error||a.error||i.error,d=[r.lastFetched,a.lastFetched,i.lastFetched].filter(Boolean),g=d.length>0?Math.max(...d):null,h={gears:r.data,species:a.data,ports:i.data,isLoading:u,error:f,lastFetched:g,refetch:l};return(0,n.jsx)(s.Provider,{value:h,children:u?(0,n.jsx)("div",{className:"flex justify-center py-10",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):e})}},53301:function(t,e,r){"use strict";r.d(e,{N:function(){return c},f:function(){return o}});var n=r(2265),a=r(44578);let o=t=>{let e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getFullYear()," ").concat(e.getHours?e.getHours():""," ").concat(t.includes("T")?t.split("T")[1].split(".")[0].substring(0,5):"").trim()},c=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:36e5,[o,c]=(0,n.useState)([]),[s,i]=(0,n.useState)(!0),[l,u]=(0,n.useState)(null),[f,d]=(0,n.useState)(null),g=async()=>{try{i(!0),u(null),console.log("Fetching fresh data for ".concat(e,"..."));let r=await t();c(r),(0,a.cW)(e,r),d(Date.now()),console.log("Fresh data for ".concat(e," fetched and cached successfully"))}catch(t){console.error("Error fetching data for ".concat(e,":"),t),u("Failed to load ".concat(e," data. Please try again."))}finally{i(!1)}};return(0,n.useEffect)(()=>{(async()=>{let t=(0,a.TK)(e,r);if(t){console.log("Data for ".concat(e," loaded from cache successfully")),c(t);let r=localStorage.getItem("".concat(e,"_timestamp"));d(r?parseInt(r,10):null),i(!1)}else await g()})()},[e]),{data:o,isLoading:s,error:l,lastFetched:f,refetch:g}}},95084:function(t,e,r){"use strict";r.d(e,{x1:function(){return o},zG:function(){return c}});var n=r(83464);let a="http://13.37.42.136:4000";if(!a)throw Error("NEXT_PUBLIC_API_URL is not defined. Please check your .env file and build process.");let o=n.Z.create({baseURL:a,headers:{"Content-Type":"application/json"}}),c=(t,e)=>{if(console.error("Error ".concat(e,":"),t),n.Z.isAxiosError(t)&&t.response){if(console.error("Error response data:",t.response.data),console.error("Error response status:",t.response.status),t.response.data&&"object"==typeof t.response.data)throw{message:t.response.data.message||"Server error (".concat(e,")"),statusCode:t.response.status,details:t.response.data};throw Error("Server error (".concat(t.response.status,"): ").concat(t.message))}throw Error("Failed to ".concat(e,". Please check your connection and try again."))}},5108:function(t,e,r){"use strict";r.d(e,{V$:function(){return l},Z7:function(){return o},Kh:function(){return s},LH:function(){return a},JL:function(){return i},XZ:function(){return c},PF:function(){return f},DE:function(){return u}});var n=r(95084);let a=async()=>{try{return(await n.x1.get("/ports")).data}catch(t){return(0,n.zG)(t,"fetching ports")}},o=async()=>{try{return(await n.x1.get("/api/dev/gear/all/gear")).data}catch(t){return(0,n.zG)(t,"fetching gears")}},c=async()=>{try{return(await n.x1.get("/species/all")).data}catch(t){return(0,n.zG)(t,"fetching species")}},s=async()=>{try{return(await n.x1.get("/api/dev/period/all/period")).data}catch(t){return(0,n.zG)(t,"fetching periods")}},i=async()=>{try{return(await n.x1.get("/region/all")).data}catch(t){return(0,n.zG)(t,"fetching regions")}},l=async()=>{try{return(await n.x1.get("/api/coop/all")).data}catch(t){return(0,n.zG)(t,"fetching coops")}},u=async t=>{try{let e=JSON.parse(JSON.stringify(t));return console.log("Sending landing data to API:",JSON.stringify(e,null,2)),(await n.x1.post("/api/dev/landings/create/form",e)).data}catch(t){return(0,n.zG)(t,"submitting landing form")}},f=async t=>{try{let e=JSON.parse(JSON.stringify(t));return console.log("Sending fleet senses data to API:",JSON.stringify(e,null,2)),(await n.x1.post("/api/dev/fleet_senses/form/create",e)).data}catch(t){return(0,n.zG)(t,"submitting fleet senses form")}}}},function(t){t.O(0,[464,971,117,744],function(){return t(t.s=54067)}),_N_E=t.O()}]);