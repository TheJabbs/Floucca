(()=>{var e={};e.id=481,e.ids=[481],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},72008:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(23072),s(5930),s(57300),s(9813),s(35866);var r=s(23191),a=s(88716),o=s(37922),l=s.n(o),i=s(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(t,n);let c=["",{children:["do",{children:["forms",{children:["census",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23072)),"D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\do\\forms\\census\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5930)),"D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\do\\forms\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,57300)),"D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\do\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9813)),"D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\do\\forms\\census\\page.tsx"],u="/do/forms/census/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/do/forms/census/page",pathname:"/do/forms/census",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},32692:(e,t,s)=>{Promise.resolve().then(s.bind(s,78819))},78819:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(10326),a=s(17577),o=s(74723),l=s(94885),i=s(90380),n=s(68402),c=s(76884),d=s(71315),u=s(37084),m=s(74926);let p=Array.from({length:12},(e,t)=>t+1),x=({gears:e,required:t=!1,control:s})=>{let{fields:l,append:i,remove:n}=(0,o.Dq)({control:s,name:"gearData"}),[c,x]=(0,a.useState)(0),[g,h]=(0,a.useState)([]),f=(0,o.qo)({control:s,name:"gearData",defaultValue:[]}),b=e.filter(e=>!f.some(t=>t.gear_code===e.gear_code)),j=e=>{h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e].sort((e,t)=>e-t))},y=t=>{let s=e.find(e=>e.gear_code===t);return s?s.gear_name:`Gear ${t}`};return(0,r.jsxs)("div",{className:"space-y-4 rounded-lg border p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Fleet Gear Usage"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Select Gear ",t&&r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{value:c,onChange:e=>{x(Number(e.target.value))},className:"w-48 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",disabled:0===b.length,children:[r.jsx("option",{value:0,children:"Select a gear"}),b.map(e=>r.jsx("option",{value:e.gear_code,children:e.gear_name},e.gear_code))]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Select Months ",t&&r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("div",{className:"flex gap-1",children:p.map(e=>r.jsx("button",{type:"button",onClick:()=>j(e),className:`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-colors
                  ${g.includes(e)?"bg-blue-500 border-blue-500 text-white":"border-gray-300 text-gray-600 hover:border-blue-400"}`,children:e},e))})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{type:"button",onClick:()=>{0!==c&&0!==g.length&&(i({gear_code:c,months:g}),x(0),h([]))},disabled:0===c||0===g.length,className:"inline-flex items-center px-2 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:r.jsx(d.Z,{className:"w-4 h-4"})})})]}),l.length>0?(0,r.jsxs)("div",{className:"space-y-2 mt-4",children:[r.jsx("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:"Added Gear Usage"}),r.jsx("div",{className:"divide-y divide-gray-100",children:l.map((e,t)=>r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors my-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:y(e.gear_code)}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Used in months: ",e.months.join(", ")]})]}),r.jsx("button",{onClick:()=>n(t),className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:r.jsx(u.Z,{className:"w-4 h-4"})})]})},e.id))})]}):(0,r.jsxs)("div",{className:"text-gray-500 italic text-center py-6 flex items-center justify-center gap-2",children:[r.jsx(m.Z,{className:"w-4 h-4"}),"No gear usage recorded yet."]})]})};var g=s(53258),h=s(41094),f=s(89570),b=s(39255);let j=function(){let{selectedPort:e}=(0,i.A)(),{ports:t,gears:s,isLoading:d,error:u}=(0,l.P)(),[m,p]=(0,a.useState)(null),[j,y]=(0,a.useState)(!1),{handleSubmit:_,setValue:v,getValues:N,reset:w,control:q,formState:{isSubmitting:P,isValid:D}}=(0,o.cI)({mode:"onChange",defaultValues:{boatData:{fleet_owner:"",fleet_registration:0,fleet_hp:0,fleet_crew:0,fleet_max_weight:0,fleet_length:0},gearData:[],port:e}}),F=(0,o.qo)({control:q}),S=(F?.gearData??[]).length>0,C=F?.port!=null,G=()=>{w({boatData:{fleet_owner:"",fleet_registration:0,fleet_hp:0,fleet_crew:0,fleet_max_weight:0,fleet_length:0},gearData:[],port:e})},k=async e=>{try{if(!e.port)throw Error("Please select a port");let t={formDto:{port_id:e.port,user_id:1,fisher_name:e.boatData.fleet_owner},boatDetailDto:e.boatData,gearUsageDto:e.gearData.map(e=>({gear_code:e.gear_code,months:e.months}))};console.log("Submitting fleet senses data:",t),await (0,f.PF)(t),(0,b.nZ)("flouca_submissions"),(0,b.nZ)("flouca_submissions_timestamp"),p({type:"success",message:"Fleet senses data submitted successfully!"}),y(!0),G()}catch(t){console.error("Error submitting form:",t);let e="Failed to submit form. Please try again.";t instanceof Error&&(e=t.message),p({type:"error",message:e}),y(!0)}};return d?r.jsx("div",{className:"flex justify-center py-10",children:r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):u?r.jsx("div",{className:"container mx-auto p-6",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:[r.jsx("p",{children:u}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md",children:"Try Again"})]})}):(0,r.jsxs)("div",{className:"container mx-auto p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Fleet Census Form"}),r.jsx("div",{className:"w-72",children:r.jsx(n.Z,{ports:t})})]}),(0,r.jsxs)("form",{onSubmit:_(k),className:"space-y-6",children:[r.jsx(c.Z,{required:!1,control:q}),r.jsx(x,{gears:s,required:!0,control:q}),r.jsx(g.Z,{isSubmitting:P,disabled:!(D&&S&&C),label:"Submit"})]}),m&&r.jsx(h.Z,{type:m.type,message:m.message,isVisible:j,onClose:()=>{y(!1)}})]})}},23072:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`D:\seniorproject\Floucca\Floucca\floucca_front\app\do\forms\census\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,786,621,99,308,601],()=>s(72008));module.exports=r})();