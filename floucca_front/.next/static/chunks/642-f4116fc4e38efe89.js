"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{9630:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(7437),a=r(2265),s=r(9343),l=r(3311);let o=(0,r(6497).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var c=r(1379),i=r(9557),d=e=>{var t,r,d,u,f,m;let{required:g,onChange:h}=e,{register:p,watch:x,formState:{errors:v}}=(0,s.cI)({defaultValues:{fleet_owner:"",fleet_registration:void 0,fleet_hp:void 0,fleet_crew:void 0,fleet_max_weight:void 0,fleet_length:void 0}});return(0,a.useEffect)(()=>{let e=x(e=>{void 0!==e.fleet_owner&&h(e)});return()=>e.unsubscribe()},[x,h]),(0,n.jsxs)("div",{className:"rounded-lg border border-blue-200 p-6 space-y-6 ",children:[(0,n.jsx)("div",{className:"flex items-center gap-3 text-gray-600",children:(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Boat Information"})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-blue-200 bg-blue-50",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,n.jsx)(o,{className:"w-4 h-4"}),(0,n.jsx)("h3",{className:"font-medium",children:"Boat Identity"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(l.Z,{label:"Boat Owner Name",name:"fleet_owner",required:g,placeholder:"Enter owner's name",register:p,error:null===(t=v.fleet_owner)||void 0===t?void 0:t.message})}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(l.Z,{label:"Boat Registration Number",name:"fleet_registration",required:g,placeholder:"Enter registration number",type:"number",register:p,error:null===(r=v.fleet_registration)||void 0===r?void 0:r.message})})]})]}),(0,n.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-blue-200 bg-blue-50",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,n.jsx)(c.Z,{className:"w-4 h-4"}),(0,n.jsx)("h3",{className:"font-medium",children:"Fleet Details"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(l.Z,{label:"Boat Fleet Hourse Power",name:"fleet_hp",required:g,placeholder:"Enter fleet hourse power",type:"number",register:p,error:null===(d=v.fleet_hp)||void 0===d?void 0:d.message})}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(l.Z,{label:"Fleet Crew Count",name:"fleet_crew",required:g,placeholder:"Enter crew count",register:p,type:"number",error:null===(u=v.fleet_crew)||void 0===u?void 0:u.message})})]})]}),(0,n.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-blue-200 bg-blue-50 md:col-span-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,n.jsx)(i.Z,{className:"w-4 h-4"}),(0,n.jsx)("h3",{className:"font-medium",children:"Boat Specifications"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(l.Z,{label:"Boat Maximum Weight",name:"fleet_max_weight",required:g,placeholder:"Enter max weight (kg)",register:p,type:"number",error:null===(f=v.fleet_max_weight)||void 0===f?void 0:f.message})}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(l.Z,{label:"Boat Length",name:"fleet_length",required:g,placeholder:"Enter length (meters)",register:p,type:"number",error:null===(m=v.fleet_length)||void 0===m?void 0:m.message})})]})]})]})]})}},1608:function(e,t,r){var n=r(7437);r(2265);var a=r(5963);t.Z=e=>{let{ports:t,onPortChange:r,className:s}=e,{selectedPort:l,setSelectedPort:o}=(0,a.A)();return(0,n.jsxs)("div",{className:"".concat(s||""),children:[(0,n.jsxs)("label",{htmlFor:"port-select",className:"block text-sm font-medium text-gray-700 mb-1",children:["Select Port ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsxs)("select",{id:"port-select",value:(null==l?void 0:l.toString())||"",onChange:e=>{let t=e.target.value;if(t){let e=parseInt(t,10);o(e),null==r||r(e)}else o(null),null==r||r(0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Select a port"}),t.map(e=>(0,n.jsx)("option",{value:e.port_id.toString(),children:e.port_name},e.port_id))]})]})}},6656:function(e,t,r){function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36e5;try{let r=localStorage.getItem("".concat(e,"_timestamp"));if(!r)return!1;let n=parseInt(r,10);return Date.now()-n<t}catch(e){return console.error("Error checking cache validity:",e),!1}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36e5;try{if(!n(e,t))return null;let r=localStorage.getItem(e);if(!r)return null;return JSON.parse(r)}catch(e){return console.error("Error retrieving from cache:",e),null}}function s(e,t){try{let r="".concat(e,"_timestamp");localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem(r,Date.now().toString())}catch(e){console.error("Error saving to cache:",e)}}function l(e){try{let t="".concat(e,"_timestamp");localStorage.removeItem(e),localStorage.removeItem(t)}catch(e){console.error("Error removing from cache:",e)}}r.d(t,{TK:function(){return a},cW:function(){return s},kI:function(){return n},nZ:function(){return l}})},3311:function(e,t,r){var n=r(7437);r(2265),t.Z=e=>{let{label:t,name:r,type:a="text",required:s=!1,placeholder:l="",min:o=0,max:c,register:i,error:d}=e;return(0,n.jsxs)("div",{className:"form-group mb-2",children:[(0,n.jsxs)("label",{htmlFor:r,className:"block text-gray-700 text-sm font-semibold mb-1",children:[t," ",s&&(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{type:a,id:r,...i(r,{required:s,valueAsNumber:"number"===a,validate:"number"===a?e=>!isNaN(e)&&(void 0===o||e>=o)&&(void 0===c||e<=c)||"Value must be between ".concat(o," and ").concat(c):void 0}),placeholder:l,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),onKeyDown:e=>{"number"===a&&("-"===e.key||"e"===e.key)&&e.preventDefault()},onInput:e=>{let t=parseInt(e.currentTarget.value,10);void 0!==c&&t>c&&(e.currentTarget.value=c.toString()),void 0!==o&&t<o&&(e.currentTarget.value=o.toString())},required:s,min:"number"===a?o:void 0,max:"number"===a?c:void 0,step:"number"===a?"any":void 0}),d&&(0,n.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d})]})}},9702:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(7437),a=r(2265);let s=(0,r(6497).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var l=r(3855),o=r(4732),c=e=>{let{type:t,message:r,isVisible:c,onClose:i,autoClose:d=!0,duration:u=5e3}=e;return((0,a.useEffect)(()=>{let e;return c&&d&&(e=setTimeout(()=>{i()},u)),()=>{e&&clearTimeout(e)}},[c,d,u,i]),c)?(0,n.jsx)("div",{className:"fixed bottom-6 right-6 z-50 max-w-md w-full animate-slide-up",children:(0,n.jsxs)("div",{className:"rounded-lg shadow-lg p-4 flex items-center justify-between\n          ".concat("success"===t?"bg-green-50 text-green-800 border-l-4 border-green-500":"bg-red-50 text-red-800 border-l-4 border-red-500"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:["success"===t?(0,n.jsx)(s,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):(0,n.jsx)(l.Z,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),(0,n.jsx)("p",{className:"font-medium",children:r})]}),(0,n.jsx)("button",{onClick:i,className:"p-1 rounded-full hover:bg-".concat("success"===t?"green":"red","-100"),children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})]})}):null}},379:function(e,t,r){var n=r(7437);r(2265),t.Z=e=>{let{isSubmitting:t,disabled:r=!1,label:a="Submit"}=e;return(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(t||r?"opacity-50 cursor-not-allowed":""),disabled:t||r,children:t?"Submitting...":a}),r&&(0,n.jsx)("div",{className:"absolute transform -translate-x-1/2 bg-gray-700 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"Please fill all required fields."})]})}},1696:function(e,t,r){r.d(t,{P:function(){return c},e:function(){return i}});var n=r(7437),a=r(2265),s=r(5397),l=r(4683);let o=(0,a.createContext)(void 0);function c(){let e=(0,a.useContext)(o);if(!e)throw Error("useFormsData must be used within a FormsDataProvider");return e}function i(e){let{children:t}=e,r=(0,l.N)(s.Z7,"flouca_form_gears"),a=(0,l.N)(s.XZ,"flouca_form_species"),c=(0,l.N)(s.LH,"flouca_form_ports"),i=async()=>{await Promise.all([r.refetch(),a.refetch(),c.refetch()])},d=r.isLoading||a.isLoading||c.isLoading,u=r.error||a.error||c.error,f=[r.lastFetched,a.lastFetched,c.lastFetched].filter(Boolean),m=f.length>0?Math.max(...f):null,g={gears:r.data,species:a.data,ports:c.data,isLoading:d,error:u,lastFetched:m,refetch:i};return(0,n.jsx)(o.Provider,{value:g,children:d?(0,n.jsx)("div",{className:"flex justify-center py-10",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t})}},5963:function(e,t,r){r.d(t,{A:function(){return o},PortProvider:function(){return l}});var n=r(7437),a=r(2265);let s=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null);return(0,n.jsx)(s.Provider,{value:{selectedPort:r,setSelectedPort:l},children:t})}function o(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("usePort must be used within a PortProvider");return e}},4683:function(e,t,r){r.d(t,{N:function(){return l},f:function(){return s}});var n=r(2265),a=r(6656);let s=e=>{let t=new Date(e);return"".concat(t.getDate().toString().padStart(2,"0"),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getFullYear()," ").concat(t.getHours?t.getHours():""," ").concat(e.includes("T")?e.split("T")[1].split(".")[0].substring(0,5):"").trim()},l=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:36e5,[s,l]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[i,d]=(0,n.useState)(null),[u,f]=(0,n.useState)(null),m=async()=>{try{c(!0),d(null),console.log("Fetching fresh data for ".concat(t,"..."));let r=await e();l(r),(0,a.cW)(t,r),f(Date.now()),console.log("Fresh data for ".concat(t," fetched and cached successfully"))}catch(e){console.error("Error fetching data for ".concat(t,":"),e),d("Failed to load ".concat(t," data. Please try again."))}finally{c(!1)}};return(0,n.useEffect)(()=>{(async()=>{let e=(0,a.TK)(t,r);if(e){console.log("Data for ".concat(t," loaded from cache successfully")),l(e);let r=localStorage.getItem("".concat(t,"_timestamp"));f(r?parseInt(r,10):null),c(!1)}else await m()})()},[t]),{data:s,isLoading:o,error:i,lastFetched:u,refetch:m}}},4188:function(e,t,r){r.d(t,{x1:function(){return a},zG:function(){return s}});var n=r(8472);let a=n.Z.create({baseURL:"http://localhost:4000",headers:{"Content-Type":"application/json"}}),s=(e,t)=>{if(console.error("Error ".concat(t,":"),e),n.Z.isAxiosError(e)&&e.response){if(console.error("Error response data:",e.response.data),console.error("Error response status:",e.response.status),e.response.data&&"object"==typeof e.response.data)throw{message:e.response.data.message||"Server error (".concat(t,")"),statusCode:e.response.status,details:e.response.data};throw Error("Server error (".concat(e.response.status,"): ").concat(e.message))}throw Error("Failed to ".concat(t,". Please check your connection and try again."))}},5397:function(e,t,r){r.d(t,{V$:function(){return i},Z7:function(){return s},Kh:function(){return o},LH:function(){return a},JL:function(){return c},XZ:function(){return l},PF:function(){return u},DE:function(){return d}});var n=r(4188);let a=async()=>{try{return(await n.x1.get("/ports")).data}catch(e){return(0,n.zG)(e,"fetching ports")}},s=async()=>{try{return(await n.x1.get("/api/dev/gear/all/gear")).data}catch(e){return(0,n.zG)(e,"fetching gears")}},l=async()=>{try{return(await n.x1.get("/species/all")).data}catch(e){return(0,n.zG)(e,"fetching species")}},o=async()=>{try{return(await n.x1.get("/api/dev/period/all/period")).data}catch(e){return(0,n.zG)(e,"fetching periods")}},c=async()=>{try{return(await n.x1.get("/region/all")).data}catch(e){return(0,n.zG)(e,"fetching regions")}},i=async()=>{try{return(await n.x1.get("/api/coop/all")).data}catch(e){return(0,n.zG)(e,"fetching coops")}},d=async e=>{try{let t=JSON.parse(JSON.stringify(e));return console.log("Sending landing data to API:",JSON.stringify(t,null,2)),(await n.x1.post("/api/dev/landings/create/form",t)).data}catch(e){return(0,n.zG)(e,"submitting landing form")}},u=async e=>{try{let t=JSON.parse(JSON.stringify(e));return console.log("Sending fleet senses data to API:",JSON.stringify(t,null,2)),(await n.x1.post("/api/dev/fleet_senses/form/create",t)).data}catch(e){return(0,n.zG)(e,"submitting fleet senses form")}}},3855:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(6497).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2373:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(6497).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9847:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(6497).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4732:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(6497).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);