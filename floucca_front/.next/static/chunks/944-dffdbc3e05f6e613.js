"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[944],{20907:function(e,t,r){r.d(t,{Z:function(){return i}});var a=r(57437);r(2265);let n=(0,r(96471).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var s=r(67778),l=r(59006),o=r(29501),c=e=>{let{name:t,label:r,control:n,required:s=!1,type:l="text",placeholder:c="",min:i,max:u}=e,d=e=>{"number"===l&&("-"===e.key||"e"===e.key)&&e.preventDefault()};return(0,a.jsx)(o.Qr,{control:n,name:t,rules:{required:!!s&&"".concat(r," is required"),min:s&&void 0!==i?{value:i,message:"Minimum value is ".concat(i)}:void 0,max:s&&void 0!==u?{value:u,message:"Maximum value is ".concat(u)}:void 0},render:e=>{let{field:n,fieldState:{error:o}}=e;return(0,a.jsxs)("div",{className:"form-group mb-2 w-full",children:[(0,a.jsxs)("label",{htmlFor:t,className:"block text-gray-700 text-sm font-semibold mb-1",children:[r," ",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:t,type:l,...n,value:n.value||("number"===l?"":n.value),onChange:e=>{let t="number"===l?""===e.target.value?"":Number(e.target.value):e.target.value;n.onChange(t)},placeholder:c,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),onKeyDown:d,min:"number"===l?i:void 0,max:"number"===l?u:void 0,required:s}),o&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.message})]})}})},i=e=>{let{required:t,control:r}=e;return(0,a.jsxs)("div",{className:"rounded-lg border border-blue-200 p-6 space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 text-gray-600",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Boat Information"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-blue-200 bg-blue-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,a.jsx)(n,{className:"w-4 h-4"}),(0,a.jsx)("h3",{className:"font-medium",children:"Boat Identity"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(c,{control:r,name:"boatData.fleet_owner",label:"Boat Owner Name",required:t,placeholder:"Enter owner's name"})}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(c,{control:r,name:"boatData.fleet_registration",label:"Boat Registration Number",required:t,placeholder:"Enter registration number",type:"number",min:1})})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-blue-200 bg-blue-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,a.jsx)(s.Z,{className:"w-4 h-4"}),(0,a.jsx)("h3",{className:"font-medium",children:"Fleet Details"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(c,{control:r,name:"boatData.fleet_hp",label:"Boat Fleet Horse Power",required:t,placeholder:"Enter fleet horse power",type:"number",min:1})}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(c,{control:r,name:"boatData.fleet_crew",label:"Fleet Crew Count",required:t,placeholder:"Enter crew count",type:"number",min:1})})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-blue-200 bg-blue-50 md:col-span-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),(0,a.jsx)("h3",{className:"font-medium",children:"Boat Specifications"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(c,{control:r,name:"boatData.fleet_max_weight",label:"Boat Maximum Weight",required:t,placeholder:"Enter max weight (kg)",type:"number",min:0})}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(c,{control:r,name:"boatData.fleet_length",label:"Boat Length",required:t,placeholder:"Enter length (meters)",type:"number",min:0})})]})]})]})]})}},29447:function(e,t,r){var a=r(57437);r(2265);var n=r(99776);t.Z=e=>{let{ports:t,onPortChange:r,className:s}=e,{selectedPort:l,setSelectedPort:o}=(0,n.A)();return(0,a.jsxs)("div",{className:"".concat(s||""),children:[(0,a.jsxs)("label",{htmlFor:"port-select",className:"block text-sm font-medium text-gray-700 mb-1",children:["Select Port ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{id:"port-select",value:(null==l?void 0:l.toString())||"",onChange:e=>{let t=e.target.value;if(t){let e=parseInt(t,10);o(e),null==r||r(e)}else o(null),null==r||r(0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select a port"}),t.map(e=>(0,a.jsx)("option",{value:e.port_id.toString(),children:e.port_name},e.port_id))]})]})}},44578:function(e,t,r){function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36e5;try{let r=localStorage.getItem("".concat(e,"_timestamp"));if(!r)return!1;let a=parseInt(r,10);return Date.now()-a<t}catch(e){return console.error("Error checking cache validity:",e),!1}}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36e5;try{if(!a(e,t))return null;let r=localStorage.getItem(e);if(!r)return null;return JSON.parse(r)}catch(e){return console.error("Error retrieving from cache:",e),null}}function s(e,t){try{let r="".concat(e,"_timestamp");localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem(r,Date.now().toString())}catch(e){console.error("Error saving to cache:",e)}}function l(e){try{let t="".concat(e,"_timestamp");localStorage.removeItem(e),localStorage.removeItem(t)}catch(e){console.error("Error removing from cache:",e)}}r.d(t,{TK:function(){return n},cW:function(){return s},kI:function(){return a},nZ:function(){return l}})},17136:function(e,t,r){r.d(t,{Z:function(){return c}});var a=r(57437),n=r(2265);let s=(0,r(96471).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var l=r(25361),o=r(44986),c=e=>{let{type:t,message:r,isVisible:c,onClose:i,autoClose:u=!0,duration:d=5e3}=e;return((0,n.useEffect)(()=>{let e;return c&&u&&(e=setTimeout(()=>{i()},d)),()=>{e&&clearTimeout(e)}},[c,u,d,i]),c)?(0,a.jsx)("div",{className:"fixed bottom-6 right-6 z-50 max-w-md w-full animate-slide-up",children:(0,a.jsxs)("div",{className:"rounded-lg shadow-lg p-4 flex items-center justify-between\n          ".concat("success"===t?"bg-green-50 text-green-800 border-l-4 border-green-500":"bg-red-50 text-red-800 border-l-4 border-red-500"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["success"===t?(0,a.jsx)(s,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):(0,a.jsx)(l.Z,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),(0,a.jsx)("p",{className:"font-medium",children:r})]}),(0,a.jsx)("button",{onClick:i,className:"p-1 rounded-full hover:bg-".concat("success"===t?"green":"red","-100"),children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})]})}):null}},2603:function(e,t,r){var a=r(57437);r(2265),t.Z=e=>{let{isSubmitting:t,disabled:r=!1,label:n="Submit"}=e;return(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(t||r?"opacity-50 cursor-not-allowed":""),disabled:t||r,children:t?"Submitting...":n}),r&&(0,a.jsx)("div",{className:"absolute transform -translate-x-1/2 bg-gray-700 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"Please fill all required fields."})]})}},41247:function(e,t,r){r.d(t,{P:function(){return c},e:function(){return i}});var a=r(57437),n=r(2265),s=r(5108),l=r(53301);let o=(0,n.createContext)(void 0);function c(){let e=(0,n.useContext)(o);if(!e)throw Error("useFormsData must be used within a FormsDataProvider");return e}function i(e){let{children:t}=e,r=(0,l.N)(s.Z7,"flouca_form_gears"),n=(0,l.N)(s.XZ,"flouca_form_species"),c=(0,l.N)(s.LH,"flouca_form_ports"),i=async()=>{await Promise.all([r.refetch(),n.refetch(),c.refetch()])},u=r.isLoading||n.isLoading||c.isLoading,d=r.error||n.error||c.error,m=[r.lastFetched,n.lastFetched,c.lastFetched].filter(Boolean),f=m.length>0?Math.max(...m):null,h={gears:r.data,species:n.data,ports:c.data,isLoading:u,error:d,lastFetched:f,refetch:i};return(0,a.jsx)(o.Provider,{value:h,children:u?(0,a.jsx)("div",{className:"flex justify-center py-10",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t})}},99776:function(e,t,r){r.d(t,{A:function(){return o},PortProvider:function(){return l}});var a=r(57437),n=r(2265);let s=(0,n.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,n.useState)(null);return(0,a.jsx)(s.Provider,{value:{selectedPort:r,setSelectedPort:l},children:t})}function o(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("usePort must be used within a PortProvider");return e}},53301:function(e,t,r){r.d(t,{N:function(){return l},f:function(){return s}});var a=r(2265),n=r(44578);let s=e=>{let t=new Date(e);return"".concat(t.getDate().toString().padStart(2,"0"),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getFullYear()," ").concat(t.getHours?t.getHours():""," ").concat(e.includes("T")?e.split("T")[1].split(".")[0].substring(0,5):"").trim()},l=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:36e5,[s,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[i,u]=(0,a.useState)(null),[d,m]=(0,a.useState)(null),f=async()=>{try{c(!0),u(null),console.log("Fetching fresh data for ".concat(t,"..."));let r=await e();l(r),(0,n.cW)(t,r),m(Date.now()),console.log("Fresh data for ".concat(t," fetched and cached successfully"))}catch(e){console.error("Error fetching data for ".concat(t,":"),e),u("Failed to load ".concat(t," data. Please try again."))}finally{c(!1)}};return(0,a.useEffect)(()=>{(async()=>{let e=(0,n.TK)(t,r);if(e){console.log("Data for ".concat(t," loaded from cache successfully")),l(e);let r=localStorage.getItem("".concat(t,"_timestamp"));m(r?parseInt(r,10):null),c(!1)}else await f()})()},[t]),{data:s,isLoading:o,error:i,lastFetched:d,refetch:f}}},95084:function(e,t,r){r.d(t,{x1:function(){return s},zG:function(){return l}});var a=r(83464);let n="http://13.37.42.136:4000";if(!n)throw Error("NEXT_PUBLIC_API_URL is not defined. Please check your .env file and build process.");let s=a.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}}),l=(e,t)=>{if(console.error("Error ".concat(t,":"),e),a.Z.isAxiosError(e)&&e.response){if(console.error("Error response data:",e.response.data),console.error("Error response status:",e.response.status),e.response.data&&"object"==typeof e.response.data)throw{message:e.response.data.message||"Server error (".concat(t,")"),statusCode:e.response.status,details:e.response.data};throw Error("Server error (".concat(e.response.status,"): ").concat(e.message))}throw Error("Failed to ".concat(t,". Please check your connection and try again."))}},5108:function(e,t,r){r.d(t,{V$:function(){return i},Z7:function(){return s},Kh:function(){return o},LH:function(){return n},JL:function(){return c},XZ:function(){return l},PF:function(){return d},DE:function(){return u}});var a=r(95084);let n=async()=>{try{return(await a.x1.get("/ports")).data}catch(e){return(0,a.zG)(e,"fetching ports")}},s=async()=>{try{return(await a.x1.get("/api/dev/gear/all/gear")).data}catch(e){return(0,a.zG)(e,"fetching gears")}},l=async()=>{try{return(await a.x1.get("/species/all")).data}catch(e){return(0,a.zG)(e,"fetching species")}},o=async()=>{try{return(await a.x1.get("/api/dev/period/all/period")).data}catch(e){return(0,a.zG)(e,"fetching periods")}},c=async()=>{try{return(await a.x1.get("/region/all")).data}catch(e){return(0,a.zG)(e,"fetching regions")}},i=async()=>{try{return(await a.x1.get("/api/coop/all")).data}catch(e){return(0,a.zG)(e,"fetching coops")}},u=async e=>{try{let t=JSON.parse(JSON.stringify(e));return console.log("Sending landing data to API:",JSON.stringify(t,null,2)),(await a.x1.post("/api/dev/landings/create/form",t)).data}catch(e){return(0,a.zG)(e,"submitting landing form")}},d=async e=>{try{let t=JSON.parse(JSON.stringify(e));return console.log("Sending fleet senses data to API:",JSON.stringify(t,null,2)),(await a.x1.post("/api/dev/fleet_senses/form/create",t)).data}catch(e){return(0,a.zG)(e,"submitting fleet senses form")}}},25361:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},69626:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},43728:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},44986:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);