(()=>{var e={};e.id=898,e.ids=[898],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},89762:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d}),t(71235),t(5930),t(57300),t(9813),t(35866);var a=t(23191),r=t(88716),l=t(37922),n=t.n(l),i=t(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d=["",{children:["do",{children:["forms",{children:["effort&landing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,71235)),"D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\do\\forms\\effort&landing\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5930)),"D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\do\\forms\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,57300)),"D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\do\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,9813)),"D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\seniorproject\\Floucca\\Floucca\\floucca_front\\app\\do\\forms\\effort&landing\\page.tsx"],u="/do/forms/effort&landing/page",m={require:t,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/do/forms/effort&landing/page",pathname:"/do/forms/effort&landing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},37395:(e,s,t)=>{Promise.resolve().then(t.bind(t,820))},820:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var a=t(10326),r=t(17577),l=t(43353),n=t.n(l),i=t(74723),o=t(94885),d=t(76884),c=t(71315),u=t(37084),m=t(74926);let g=({required:e=!1,gears:s,control:t})=>{let[l,n]=(0,r.useState)(0),[o,d]=(0,r.useState)({}),{fields:g,append:p,remove:x}=(0,i.Dq)({control:t,name:"effortToday.gear_entries"}),f=e=>{n(Number(e)),d({})},h=(e,s)=>{d(t=>({...t,[e]:s}))},b=()=>{if(0===l)return;let e=s.find(e=>e.gear_code===l);e&&(p({gear_code:l,gear_details:Object.entries(o).map(([s,t])=>({detail_name:s,detail_value:t,equipment_id:e.equipment_id||""}))}),n(0),d({}))},y=()=>{let e=s.filter(e=>e.gear_code===l);return 0===e.length?[]:e.map(e=>({equipment_id:e.equipment_id,equipment_name:e.equipment_name,type:"number"}))},_=e=>s.find(s=>s.gear_code===e)?.gear_name||"",j=()=>y().every(e=>o[e.equipment_name]?.trim()),v=s.filter(e=>!g.some(s=>s.gear_code===e.gear_code)),N=Array.from(new Set(v.map(e=>e.gear_code))).map(e=>{let s=v.find(s=>s.gear_code===e);return{gear_code:e,gear_name:s?.gear_name||""}});return(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Effort Today"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(i.Qr,{name:"effortToday.hours_fished",control:t,rules:{min:{value:0,message:"Hours must be between 0 and 24"},max:{value:24,message:"Hours must be between 0 and 24"}},render:({field:s,fieldState:{error:t}})=>(0,a.jsxs)("div",{className:"form-group mb-2 w-full",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Hours Fished Today",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",min:0,max:24,placeholder:"(1-24 hours)",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${t?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,...s,onChange:e=>s.onChange(Number(e.target.value)||0)}),t&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.message})]})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Fishing Gear Details",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("select",{value:l,onChange:e=>f(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",disabled:g.length===s.length,children:[a.jsx("option",{value:0,children:"Select Gear"}),N.map(e=>a.jsx("option",{value:e.gear_code,children:e.gear_name},e.gear_code))]}),0!==l&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:y().map(e=>a.jsx("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:e.equipment_id}),a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e.equipment_name}),a.jsx("input",{type:e.type,value:o[e.equipment_name]||"",onChange:s=>h(e.equipment_name,s.target.value),onKeyDown:e=>{("-"===e.key||"e"===e.key)&&e.preventDefault()},min:0,className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Enter ${e.equipment_name.toLowerCase()}`}),(0,a.jsxs)("button",{onClick:b,disabled:!j(),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",type:"button",children:[a.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Add Gear"]})]})},e.equipment_id))})]})]}),g.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:"Added Gear"}),a.jsx("div",{className:"divide-y divide-gray-100 space-y-3",children:g.map((e,s)=>a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:_(e.gear_code)}),a.jsx("div",{className:"text-sm text-gray-600 flex flex-wrap gap-2",children:e.gear_details.map(e=>(0,a.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded-md flex items-center gap-1",children:[a.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-1 rounded",children:e.equipment_id}),(0,a.jsxs)("span",{className:"font-medium",children:[e.detail_name,":"]}),e.detail_value]},e.detail_name))})]}),a.jsx("button",{onClick:()=>x(s),className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:a.jsx(u.Z,{className:"w-4 h-4"})})]})},e.id))})]}):(0,a.jsxs)("div",{className:"text-gray-500 italic text-center py-3 flex items-center justify-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),"No gear added yet."]})]})]})},p=({required:e=!1,gears:s,control:t})=>{let[l,n]=(0,r.useState)({gear_code:0,days_used:1}),{fields:o,append:d,remove:g}=(0,i.Dq)({control:t,name:"effortLastWeek.gear_entries"}),p=e=>{n(s=>({...s,gear_code:Number(e)}))},x=s.filter(e=>!o.some(s=>s.gear_code===e.gear_code)),f=e=>s.find(s=>s.gear_code===e)?.gear_name||"",h=0===l.gear_code||l.days_used<1||l.days_used>7;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Effort Last Week"})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Select Gear Used Last Week",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:l.gear_code,onChange:e=>p(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",disabled:0===x.length,children:[a.jsx("option",{value:0,children:"Select Gear"}),x.map(e=>a.jsx("option",{value:e.gear_code,children:e.gear_name},e.gear_code))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Days Used Last Week",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:1,max:7,value:l.days_used,onChange:e=>{let s=parseInt(e.target.value)||1;s>=1&&s<=7&&n(e=>({...e,days_used:s}))},placeholder:"1 to 7",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:"(1-7 days)"})]})]})]}),(0,a.jsxs)("button",{onClick:()=>{0===l.gear_code||l.days_used<1||l.days_used>7||(d(l),n({gear_code:0,days_used:1}))},disabled:h,className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",type:"button",children:[a.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Add Gear Usage"]})]}),o.length>0?(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:"Added Gear Usage"}),a.jsx("div",{className:"divide-y divide-gray-100 space-y-3",children:o.map((e,s)=>a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:f(e.gear_code)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Used for ",e.days_used," day",e.days_used>1?"s":""," last week"]})]}),a.jsx("button",{onClick:()=>g(s),className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:a.jsx(u.Z,{className:"w-4 h-4"})})]})},e.id))})]}):(0,a.jsxs)("div",{className:"text-gray-500 italic text-center py-1 flex items-center justify-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),"No gear usage recorded yet."]})]})]})};var x=t(53258),f=t(90380),h=t(68402),b=t(41094),y=t(89570),_=t(39255),j=t(43020);let v=(0,t(9664).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),N=({required:e=!1,control:s,gears:t,species:l})=>{let[n,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[g,p]=(0,r.useState)(null),[x,f]=(0,r.useState)({gear_code:0,specie_code:0,fish_weight:0,fish_length:0,fish_quantity:0,price:0}),h=(0,i.qo)({control:s,name:"location"}),b=(0,i.qo)({control:s,name:"effortToday.gear_entries"})||[],{fields:y,append:_,remove:N}=(0,i.Dq)({control:s,name:"fishingDetails.fish_entries"}),w=e=>{f(s=>({...s,specie_code:e.specie_code})),p(e),m(!1),o("")},q=(e,s)=>{f(t=>({...t,[e]:s}))},k=()=>{let{gear_code:e,specie_code:s,fish_weight:t,fish_length:a,fish_quantity:r,price:l}=x;return e>0&&s>0&&t>0&&a>0&&r>0&&l>0},P=e=>{let s=t.find(s=>s.gear_code===e);if(s)return s.gear_name;let a=b.find(s=>s.gear_code===e);return a?`Gear ${a.gear_code}`:`Unknown Gear (${e})`},D=e=>{let s=l.find(s=>s.specie_code===e);return s?s.specie_name:`Species ${e}`},C=l.filter(e=>e.specie_name.toLowerCase().includes(n.toLowerCase()));(0,r.useEffect)(()=>{function e(e){e.target.closest(".species-dropdown")||m(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let F=e=>{("-"===e.key||"e"===e.key)&&e.preventDefault()};return h?(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:(0,a.jsxs)("h2",{className:"text-xl font-semibold",children:["Fishing Details Today",e&&a.jsx("span",{className:"text-red-500",children:"*"})]})}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[a.jsx("span",{className:"font-medium",children:h.name}),(0,a.jsxs)("span",{className:"text-blue-600",children:["(",h.lat.toFixed(4),", ",h.lng.toFixed(4),")"]})]})}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:["Fishing Gear ",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:x.gear_code,onChange:e=>q("gear_code",Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[a.jsx("option",{value:0,children:"Select Gear"}),b.map(e=>a.jsx("option",{value:e.gear_code,children:P(e.gear_code)},e.gear_code))]})]}),(0,a.jsxs)("div",{className:"form-group species-dropdown",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:["Fish Species ",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white flex items-center justify-between cursor-pointer",onClick:()=>m(!d),children:g?(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[a.jsx("span",{children:g.specie_name}),a.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),p(null),q("specie_code",0)},className:"text-gray-500 hover:text-gray-700",children:a.jsx(j.Z,{size:16})})]}):a.jsx("span",{className:"text-gray-500",children:"Search for species..."})}),d&&(0,a.jsxs)("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-white p-2 border-b",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"Search species...",className:"w-full pl-8 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:e=>e.stopPropagation()}),a.jsx(v,{className:"absolute left-2 top-2.5 text-gray-400",size:16})]})}),0===C.length?a.jsx("div",{className:"p-3 text-center text-gray-500",children:"No species found"}):C.map(e=>a.jsx("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",onClick:s=>{s.preventDefault(),s.stopPropagation(),w(e)},children:e.specie_name},e.specie_code))]})]})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:["Weight (kg) ",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",value:x.fish_weight||"",onChange:e=>q("fish_weight",Number(e.target.value)),min:0,onInput:e=>{let s=e.currentTarget;0>parseFloat(s.value)&&(s.value="0")},onKeyDown:F,placeholder:"Fish weight",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:["Length (cm) ",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",value:x.fish_length||"",onInput:e=>{let s=e.currentTarget;0>parseFloat(s.value)&&(s.value="0")},onChange:e=>q("fish_length",Number(e.target.value)),onKeyDown:F,min:0,placeholder:"Fish length",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:["Quantity ",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",value:x.fish_quantity||"",onInput:e=>{let s=e.currentTarget;1>parseFloat(s.value)&&(s.value="1")},onChange:e=>q("fish_quantity",Number(e.target.value)),onKeyDown:F,min:1,placeholder:"Fish quantity",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:["Price (LBP) ",e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",value:x.price||"",onChange:e=>q("price",Number(e.target.value)),min:0,onInput:e=>{let s=e.currentTarget;0>parseFloat(s.value)&&(s.value="0")},onKeyDown:F,placeholder:"Enter price",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("button",{onClick:()=>{h&&k()&&(_({location_id:h.id,...x}),f({gear_code:0,specie_code:0,fish_weight:0,fish_length:0,fish_quantity:0,price:0}),p(null))},disabled:!k(),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",type:"button",children:[a.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Add Entry"]})]}),y.length>0?(0,a.jsxs)("div",{className:"space-y-4 mt-6",children:[a.jsx("h3",{className:"font-medium text-gray-700",children:"Added Entries"}),a.jsx("div",{className:"divide-y divide-gray-100 space-y-3",children:y.map((e,s)=>a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 flex-1",children:[a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("span",{className:"text-gray-900 ",children:D(e.specie_code)})}),a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("span",{className:"text-gray-600 ",children:P(e.gear_code)})}),a.jsx("div",{className:"flex items-center gap-1",children:(0,a.jsxs)("span",{className:"text-gray-600 truncate",children:[e.fish_weight,"kg, ",e.fish_quantity," fish"]})}),a.jsx("div",{className:"flex items-center gap-1",children:(0,a.jsxs)("span",{className:"text-gray-600 truncate",children:[e.fish_length,"cm"]})}),a.jsx("div",{className:"flex items-center gap-1",children:(0,a.jsxs)("span",{className:"text-gray-600 truncate",children:[e.price," LBP"]})})]}),a.jsx("button",{onClick:()=>N(s),className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:a.jsx(u.Z,{className:"w-4 h-4"})})]})},e.id))})]}):a.jsx("div",{className:"text-gray-500 italic text-center py-1",children:"No fish entries added yet."})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Fishing Details Today"})}),a.jsx("p",{className:"mt-4 text-gray-500 italic flex items-center gap-2",children:"Please select a location on the map first."})]})},w=n()(async()=>{},{loadableGenerated:{modules:["app\\do\\forms\\effort&landing\\page.tsx -> @/components/forms-c/map-with-markers"]},ssr:!1}),q=function(){let{selectedPort:e}=(0,f.A)(),{gears:s,species:t,ports:l,isLoading:n,error:c,refetch:u}=(0,o.P)(),[m,j]=(0,r.useState)(null),[v,q]=(0,r.useState)(!1),{handleSubmit:k,setValue:P,control:D,reset:C,formState:{isSubmitting:F}}=(0,i.cI)({mode:"onChange",defaultValues:{port:e,boatData:{fleet_owner:"",fleet_registration:0,fleet_hp:0,fleet_crew:0,fleet_max_weight:0,fleet_length:0},effortToday:{hours_fished:0,gear_entries:[]},effortLastWeek:{gear_entries:[]},location:null,fishingDetails:{fish_entries:[]}}}),S=(0,i.qo)({control:D}),T=!!S?.effortToday?.hours_fished&&(S?.effortToday?.gear_entries??[]).length>0,L=()=>{C({port:e,boatData:{fleet_owner:"",fleet_registration:0,fleet_hp:0,fleet_crew:0,fleet_max_weight:0,fleet_length:0},effortToday:{hours_fished:0,gear_entries:[]},effortLastWeek:{gear_entries:[]},location:null,fishingDetails:{fish_entries:[]}})},G=async e=>{try{if(j(null),q(!1),!e.port)throw Error("Port must be selected");let s={form:{port_id:e.port,user_id:1,fisher_name:e.boatData.fleet_owner},boat_details:{fleet_owner:e.boatData.fleet_owner||"Unknown",fleet_registration:e.boatData.fleet_registration||0,fleet_hp:e.boatData.fleet_hp||0,fleet_crew:e.boatData.fleet_crew||0,fleet_max_weight:e.boatData.fleet_max_weight||0,fleet_length:e.boatData.fleet_length||0}};e.location&&(s.landing={latitude:e.location.lat,longitude:e.location.lng}),T&&(e.fishingDetails.fish_entries.length>0&&(s.fish=e.fishingDetails.fish_entries.map(e=>({specie_code:e.specie_code,gear_code:e.gear_code,fish_weight:e.fish_weight,fish_length:e.fish_length,fish_quantity:e.fish_quantity,price:e.price||0}))),e.effortToday.hours_fished>0&&e.effortToday.hours_fished<=24&&(s.effort={hours_fished:e.effortToday.hours_fished}),e.effortToday.gear_entries.length>0&&(s.gearDetail=e.effortToday.gear_entries.flatMap(e=>e.gear_details.map(s=>({gear_code:e.gear_code,detail_name:s.detail_name,detail_value:s.detail_value}))))),e.effortLastWeek.gear_entries.length>0&&(s.lastw=e.effortLastWeek.gear_entries.map(e=>({gear_code:e.gear_code,days_fished:e.days_used}))),console.log("Submitting API payload:",JSON.stringify(s,null,2));let t=await (0,y.DE)(s);console.log("API Response:",t),(0,_.nZ)("flouca_submissions"),(0,_.nZ)("flouca_submissions_timestamp"),j({type:"success",message:"Form submitted successfully! Your data has been recorded."}),q(!0),L()}catch(s){console.error("Error submitting form:",s);let e="There was an error submitting the form. Please try again.";s instanceof Error&&(e=s.message),j({type:"error",message:e}),q(!0)}};return n?a.jsx("div",{className:"flex justify-center py-10",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):c?a.jsx("div",{className:"container mx-auto p-6",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:[a.jsx("p",{children:c}),a.jsx("button",{onClick:()=>u(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md",children:"Try Again"})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Landing Form"}),a.jsx("div",{className:"w-72",children:a.jsx(h.Z,{ports:l})})]}),(0,a.jsxs)("form",{onSubmit:k(G),className:"space-y-6",children:[a.jsx(d.Z,{required:!1,control:D}),a.jsx(p,{required:!1,control:D,gears:s}),a.jsx(g,{required:!1,control:D,gears:s}),T&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(w,{required:!0,control:D,setValue:P}),a.jsx(N,{required:!0,control:D,gears:s,species:t})]}),a.jsx(x.Z,{isSubmitting:F,disabled:!(S?.port&&(!T||S?.location&&(S?.fishingDetails?.fish_entries??[]).length>0)),label:"Submit"})]}),m&&a.jsx(b.Z,{type:m.type,message:m.message,isVisible:v,onClose:()=>{q(!1)}})]})}},43353:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let a=t(91174);t(10326),t(17577);let r=a._(t(77028));function l(e,s){var t;let a={loading:e=>{let{error:s,isLoading:t,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let l={...a,...s};return(0,r.default)({...l,modules:null==(t=l.loadableGenerated)?void 0:t.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},933:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=t(94129);function r(e){let{reason:s,children:t}=e;throw new a.BailoutToCSRError(s)}},77028:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return d}});let a=t(10326),r=t(17577),l=t(933),n=t(46618);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let s={...o,...e},t=(0,r.lazy)(()=>s.loader().then(i)),d=s.loading;function c(e){let i=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=s.ssr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.PreloadCss,{moduleIds:s.modules}),(0,a.jsx)(t,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(t,{...e})});return(0,a.jsx)(r.Suspense,{fallback:i,children:o})}return c.displayName="LoadableComponent",c}},46618:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadCss",{enumerable:!0,get:function(){return l}});let a=t(10326),r=t(54580);function l(e){let{moduleIds:s}=e,t=(0,r.getExpectedRequestStore)("next/dynamic css"),l=[];if(t.reactLoadableManifest&&s){let e=t.reactLoadableManifest;for(let t of s){if(!e[t])continue;let s=e[t].files.filter(e=>e.endsWith(".css"));l.push(...s)}}return 0===l.length?null:(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:t.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},71235:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`D:\seniorproject\Floucca\Floucca\floucca_front\app\do\forms\effort&landing\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,786,621,99,308,601],()=>t(89762));module.exports=a})();