(()=>{var e={};e.id=679,e.ids=[679],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1545:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>o}),t(2535),t(3070),t(4901),t(9813),t(5866);var r=t(3191),a=t(8716),l=t(7922),i=t.n(l),n=t(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=["",{children:["dataoperator",{children:["forms",{children:["effort-and-landing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2535)),"C:\\Users\\johnn\\WebstormProjects\\Floucca\\floucca_front\\app\\dataoperator\\forms\\effort-and-landing\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3070)),"C:\\Users\\johnn\\WebstormProjects\\Floucca\\floucca_front\\app\\dataoperator\\forms\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,4901)),"C:\\Users\\johnn\\WebstormProjects\\Floucca\\floucca_front\\app\\dataoperator\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,9813)),"C:\\Users\\johnn\\WebstormProjects\\Floucca\\floucca_front\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\johnn\\WebstormProjects\\Floucca\\floucca_front\\app\\dataoperator\\forms\\effort-and-landing\\page.tsx"],u="/dataoperator/forms/effort-and-landing/page",m={require:t,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dataoperator/forms/effort-and-landing/page",pathname:"/dataoperator/forms/effort-and-landing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5759:(e,s,t)=>{Promise.resolve().then(t.bind(t,4522))},4522:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var r=t(326),a=t(7577),l=t(3353),i=t.n(l),n=t(4723),d=t(4885),o=t(3885),c=t(8787),u=t(1315),m=t(7084),g=t(4926);let h=({required:e=!1,gears:s,onChange:t})=>{let[l,i]=(0,a.useState)(0),[d,o]=(0,a.useState)({}),{register:h,control:f,getValues:p,formState:{errors:x}}=(0,n.cI)({defaultValues:{hours_fished:void 0,gear_entries:[]}}),{fields:_,append:b,remove:y}=(0,n.Dq)({control:f,name:"gear_entries"}),j=()=>{t({hours_fished:p("hours_fished"),gear_entries:_})};(0,a.useEffect)(()=>{j()},[_,p("hours_fished")]);let v=e=>{i(Number(e)),o({})},N=(e,s)=>{o(t=>({...t,[e]:s}))},w=()=>{if(0===l)return;let e=s.find(e=>e.gear_code===l);e&&(b({gear_code:l,gear_details:Object.entries(d).map(([s,t])=>({detail_name:s,detail_value:t,equipment_id:e.equipment_id||""}))}),i(0),o({}),j())},q=()=>{let e=s.filter(e=>e.gear_code===l);return 0===e.length?[]:e.map(e=>({equipment_id:e.equipment_id,equipment_name:e.equipment_name,type:"number"}))},P=e=>s.find(s=>s.gear_code===e)?.gear_name||"",k=()=>q().every(e=>d[e.equipment_name]?.trim()),C=s.filter(e=>!_.some(s=>s.gear_code===e.gear_code)),S=Array.from(new Set(C.map(e=>e.gear_code))).map(e=>{let s=C.find(s=>s.gear_code===e);return{gear_code:e,gear_name:s?.gear_name||""}});return(0,r.jsxs)("div",{className:"bg-white rounded-lg border p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:r.jsx("h2",{className:"text-xl font-semibold",children:"Effort Today"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(c.Z,{label:"Hours Fished Today",name:"hours_fished",placeholder:"(1-24 hours)",required:e,type:"number",min:1,max:24,register:h,error:x.hours_fished?.message})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Fishing Gear Details",e&&r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("select",{value:l,onChange:e=>v(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",disabled:_.length===s.length,children:[r.jsx("option",{value:0,children:"Select Gear"}),S.map(e=>r.jsx("option",{value:e.gear_code,children:e.gear_name},e.gear_code))]}),0!==l&&r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:q().map(e=>r.jsx("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:e.equipment_id}),r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e.equipment_name}),r.jsx("input",{type:e.type,value:d[e.equipment_name]||"",onChange:s=>N(e.equipment_name,s.target.value),onKeyDown:e=>{("-"===e.key||"e"===e.key)&&e.preventDefault()},min:0,className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Enter ${e.equipment_name.toLowerCase()}`}),(0,r.jsxs)("button",{onClick:w,disabled:!k(),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",type:"button",children:[r.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Add Gear"]})]})},e.equipment_id))})]})]}),_.length>0?(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:"Added Gear"}),r.jsx("div",{className:"divide-y divide-gray-100 space-y-3",children:_.map((e,s)=>r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:P(e.gear_code)}),r.jsx("div",{className:"text-sm text-gray-600 flex flex-wrap gap-2",children:e.gear_details.map(e=>(0,r.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded-md flex items-center gap-1",children:[r.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-1 rounded",children:e.equipment_id}),(0,r.jsxs)("span",{className:"font-medium",children:[e.detail_name,":"]}),e.detail_value]},e.detail_name))})]}),r.jsx("button",{onClick:()=>{y(s),j()},className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:r.jsx(m.Z,{className:"w-4 h-4"})})]})},e.id))})]}):(0,r.jsxs)("div",{className:"text-gray-500 italic text-center py-3 flex items-center justify-center gap-2",children:[r.jsx(g.Z,{className:"w-4 h-4"}),"No gear added yet."]})]})]})},f=({required:e=!1,gears:s,onChange:t})=>{let[l,i]=(0,a.useState)({gear_code:0,days_used:1}),{control:d}=(0,n.cI)({defaultValues:{gear_entries:[]}}),{fields:o,append:c,remove:h}=(0,n.Dq)({control:d,name:"gear_entries"});(0,a.useEffect)(()=>{t({gear_entries:o})},[o,t]);let f=s.filter(e=>!o.some(s=>s.gear_code===e.gear_code)),p=e=>{i(s=>({...s,gear_code:Number(e)}))},x=e=>s.find(s=>s.gear_code===e)?.gear_name||"",_=0===l.gear_code||l.days_used<1||l.days_used>7;return(0,r.jsxs)("div",{className:"bg-white rounded-lg border p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:r.jsx("h2",{className:"text-xl font-semibold",children:"Effort Last Week"})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Select Gear Used Last Week",e&&r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{value:l.gear_code,onChange:e=>p(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",disabled:0===f.length,children:[r.jsx("option",{value:0,children:"Select Gear"}),f.map(e=>r.jsx("option",{value:e.gear_code,children:e.gear_name},e.gear_code))]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Days Used Last Week",e&&r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:1,max:7,value:l.days_used,onChange:e=>{let s=parseInt(e.target.value)||1;s>=1&&s<=7&&i(e=>({...e,days_used:s}))},placeholder:"1 to 7",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:"(1-7 days)"})]})]})]}),(0,r.jsxs)("button",{onClick:()=>{0===l.gear_code||l.days_used<1||l.days_used>7||(c(l),i({gear_code:0,days_used:1}))},disabled:_,className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",type:"button",children:[r.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Add Gear Usage"]})]}),o.length>0?(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:"Added Gear Usage"}),r.jsx("div",{className:"divide-y divide-gray-100 space-y-3",children:o.map((e,s)=>r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:x(e.gear_code)}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Used for ",e.days_used," day",e.days_used>1?"s":""," last week"]})]}),r.jsx("button",{onClick:()=>h(s),className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:r.jsx(m.Z,{className:"w-4 h-4"})})]})},e.id))})]}):(0,r.jsxs)("div",{className:"text-gray-500 italic text-center py-1 flex items-center justify-center gap-2",children:[r.jsx(g.Z,{className:"w-4 h-4"}),"No gear usage recorded yet."]})]})]})};var p=t(3258),x=t(380),_=t(8402),b=t(1094),y=t(9570),j=t(9255),v=t(3020);let N=(0,t(9664).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),w=({required:e=!1,todaysGears:s,selectedLocation:t,gears:l,species:i,onChange:d})=>{let[o,g]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null),[_,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)([]),{register:w,control:q,watch:P,reset:k,getValues:C,setValue:S,formState:{errors:D}}=(0,n.cI)({defaultValues:{current:{gear_code:"",specie_code:"",fish_weight:"",fish_length:"",fish_quantity:"",price:""},fish_entries:[]}}),{fields:L,append:F,remove:E}=(0,n.Dq)({control:q,name:"fish_entries"}),T=P("current");(0,a.useEffect)(()=>{let e=T.gear_code;""!==e&&e?b(!0):b(!1)},[T.gear_code]),(0,a.useEffect)(()=>{let e=L.map(e=>({...e}));d({fish_entries:e}),j(e.map(e=>e.specie_code))},[L,d]);let G=i.filter(e=>!y.includes(e.specie_code)).filter(e=>e.specie_name.toLowerCase().includes(o.toLowerCase())),O=()=>{S("current.gear_code",""),S("current.specie_code",""),S("current.fish_weight",""),S("current.fish_length",""),S("current.fish_quantity",""),S("current.price",""),x(null),g(""),f(!1),b(!1)},Z=e=>{let s=""!==e.gear_code&&"0"!==e.gear_code&&0!==e.gear_code;return!!s&&t&&s&&e.specie_code&&""!==e.specie_code&&e.fish_weight&&e.fish_length&&e.fish_quantity&&e.price},A=e=>{S("current.specie_code",e.specie_code),x(e),f(!1),g("")},W=e=>{E(e)},U=e=>{let t=l.find(s=>s.gear_code===e);if(t)return t.gear_name;let r=s.find(s=>s.gear_code===e);if(r){if(r.gear_details&&r.gear_details.length>0){let e=r.gear_details.find(e=>"name"===e.detail_name.toLowerCase());if(e)return e.detail_value}return`Gear ${r.gear_code}`}return`Unknown Gear (${e})`},I=e=>{let s=i.find(s=>s.specie_code===e);return s?s.specie_name:`Species ${e}`};return((0,a.useEffect)(()=>{function e(e){e.target.closest(".species-dropdown")||f(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),t)?(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:r.jsx("h2",{className:"text-xl font-semibold",children:"Fishing Details Today"})}),(0,r.jsxs)("div",{className:"grid gap-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:["Fishing Gear ",e&&r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{...w("current.gear_code",{onChange:e=>{e.target.value?b(!0):(b(!1),S("current.specie_code",""),S("current.fish_weight",""),S("current.fish_length",""),S("current.fish_quantity",""),S("current.price",""),x(null))}}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[r.jsx("option",{value:"",children:"Select Gear"}),s.map(e=>r.jsx("option",{value:e.gear_code,children:U(e.gear_code)},e.gear_code))]})]}),_&&(0,r.jsxs)("div",{className:"form-group species-dropdown",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:["Fish Species ",e&&r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white flex items-center justify-between cursor-pointer",onClick:()=>f(!h),children:p?(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[r.jsx("span",{children:p.specie_name}),r.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),x(null),S("current.specie_code","")},className:"text-gray-500 hover:text-gray-700",children:r.jsx(v.Z,{size:16})})]}):r.jsx("span",{className:"text-gray-500",children:"Search for species..."})}),h&&(0,r.jsxs)("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[r.jsx("div",{className:"sticky top-0 bg-white p-2 border-b",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"text",value:o,onChange:e=>g(e.target.value),placeholder:"Search species...",className:"w-full pl-8 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:e=>e.stopPropagation()}),r.jsx(N,{className:"absolute left-2 top-2.5 text-gray-400",size:16})]})}),0===G.length?r.jsx("div",{className:"p-3 text-center text-gray-500",children:y.length===i.length?"All species have been added":"No species found matching search"}):G.map(e=>r.jsx("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",onClick:s=>{s.preventDefault(),s.stopPropagation(),A(e)},children:e.specie_name},e.specie_code))]}),r.jsx("input",{type:"hidden",...w("current.specie_code")})]})]})]}),_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"space-y-1",children:r.jsx(c.Z,{label:"Weight (kg)",name:"current.fish_weight",placeholder:"Fish weight",type:"number",required:e,register:w,error:D.current?.fish_weight?.message})}),r.jsx("div",{className:"space-y-1",children:r.jsx(c.Z,{label:"Length (cm)",name:"current.fish_length",placeholder:"Fish length",type:"number",required:e,register:w,error:D.current?.fish_length?.message})}),r.jsx("div",{className:"space-y-1",children:r.jsx(c.Z,{label:"Quantity",name:"current.fish_quantity",placeholder:"Fish quantity",type:"number",required:e,register:w,error:D.current?.fish_quantity?.message})}),r.jsx("div",{className:"space-y-1",children:r.jsx(c.Z,{label:"Price (LBP)",name:"current.price",placeholder:"Enter price",type:"number",required:e,register:w,error:D.current?.price?.message})})]}),(0,r.jsxs)("button",{onClick:()=>{let e=C("current");Z(e)&&t&&(F({location_id:t.id,gear_code:Number(e.gear_code),specie_code:Number(e.specie_code),fish_weight:Number(e.fish_weight),fish_length:Number(e.fish_length),fish_quantity:Number(e.fish_quantity),price:Number(e.price)}),O())},disabled:!Z(T),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",type:"button",children:[r.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Add Entry"]})]})]}),L.length>0?(0,r.jsxs)("div",{className:"space-y-4 mt-6",children:[r.jsx("h3",{className:"font-medium text-gray-700",children:"Added Entries"}),r.jsx("div",{className:"divide-y divide-gray-100 space-y-3",children:L.map((e,s)=>r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 flex-1",children:[r.jsx("div",{className:"flex items-center gap-1",children:r.jsx("span",{className:"text-gray-900 ",children:I(e.specie_code)})}),r.jsx("div",{className:"flex items-center gap-1",children:r.jsx("span",{className:"text-gray-600 ",children:U(e.gear_code)})}),r.jsx("div",{className:"flex items-center gap-1",children:(0,r.jsxs)("span",{className:"text-gray-600 truncate",children:[e.fish_weight,"kg, ",e.fish_quantity," fish"]})}),r.jsx("div",{className:"flex items-center gap-1",children:(0,r.jsxs)("span",{className:"text-gray-600 truncate",children:[e.fish_length,"cm"]})}),r.jsx("div",{className:"flex items-center gap-1",children:(0,r.jsxs)("span",{className:"text-gray-600 truncate",children:[e.price," LBP"]})})]}),r.jsx("button",{onClick:()=>W(s),className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:r.jsx(m.Z,{className:"w-4 h-4"})})]})},e.id))})]}):r.jsx("div",{className:"text-gray-500 italic text-center py-1",children:"No fish entries added yet."})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:r.jsx("h2",{className:"text-xl font-semibold",children:"Fishing Details Today"})}),r.jsx("p",{className:"mt-4 text-gray-500 italic flex items-center gap-2",children:"Please select a location on the map first."})]})},q=i()(async()=>{},{loadableGenerated:{modules:["app\\dataoperator\\forms\\effort-and-landing\\page.tsx -> @/components/forms-c/map-with-markers"]},ssr:!1}),P=function(){let{selectedPort:e}=(0,x.A)(),{gears:s,species:t,ports:l,isLoading:i,error:c,refetch:u}=(0,d.P)(),m={LandingFormDTO:{port:e,boatData:{fleet_owner:"",fleet_registration:0,fleet_hp:0,fleet_crew:0,fleet_max_weight:0,fleet_length:0},effortTodayData:{hours_fished:0,gear_entries:[]},effortLastWeekData:{gear_entries:[]},location:null,fishingDetails:{fish_entries:[]}}},{handleSubmit:g,setValue:v,reset:N,formState:{isSubmitting:P}}=(0,n.cI)({defaultValues:m}),[k,C]=(0,a.useState)(null),[S,D]=(0,a.useState)([]),[L,F]=(0,a.useState)(!1),[E,T]=(0,a.useState)(!1),[G,O]=(0,a.useState)(0),[Z,A]=(0,a.useState)(null),[W,U]=(0,a.useState)(!1),[I,M]=(0,a.useState)({port:!1,boatInfo:!1,effortToday:null,effortLastWeek:null,location:null,fishingDetails:null}),$=(e,s)=>{M(t=>({...t,[e]:s}))},R=()=>{N(m),C(null),D([]),F(!1),T(!1),M({port:!!e,boatInfo:!1,effortToday:null,effortLastWeek:null,location:null,fishingDetails:null}),O(e=>e+1)},z=(0,a.useCallback)(()=>{U(!1)},[]),B=(0,a.useCallback)(e=>{v("LandingFormDTO.boatData",e),$("boatInfo",!!e.fleet_owner&&e.fleet_registration>0&&e.fleet_hp>0&&e.fleet_crew>0&&e.fleet_max_weight>0&&e.fleet_length>0)},[v]),V=(0,a.useCallback)(e=>{v("LandingFormDTO.effortTodayData",e);let s=e.hours_fished>0||e.gear_entries.length>0;F(s),$("effortToday",s?e.hours_fished>0&&e.gear_entries.length>0:null),s?D(e.gear_entries):D([]),s||($("location",null),$("fishingDetails",null))},[v]),J=(0,a.useCallback)(e=>{v("LandingFormDTO.effortLastWeekData",e);let s=e.gear_entries.length>0;T(s),$("effortLastWeek",!!s||null)},[v]),H=(0,a.useCallback)(e=>{v("LandingFormDTO.location",e),C(e),L&&$("location",!!e)},[v,L]),K=(0,a.useCallback)(e=>{v("LandingFormDTO.fishingDetails",e),L&&$("fishingDetails",e.fish_entries.length>0)},[v,L]),Q=async e=>{try{A(null),U(!1);let{port:s,boatData:t,effortTodayData:r,effortLastWeekData:a,location:l,fishingDetails:i}=e.LandingFormDTO;if(!s)throw Error("Port must be selected");let n={form:{port_id:s,user_id:1,fisher_name:t.fleet_owner},boat_details:{fleet_owner:t.fleet_owner||"Unknown",fleet_registration:t.fleet_registration||0,fleet_hp:t.fleet_hp||0,fleet_crew:t.fleet_crew||0,fleet_max_weight:t.fleet_max_weight||0,fleet_length:t.fleet_length||0}};l&&l.lat&&l.lng&&(n.landing={latitude:l.lat,longitude:l.lng}),L&&(i.fish_entries&&i.fish_entries.length>0&&(n.fish=i.fish_entries.map(e=>({specie_code:e.specie_code,gear_code:e.gear_code,fish_weight:e.fish_weight,fish_length:e.fish_length,fish_quantity:e.fish_quantity,price:e.price||0}))),r.hours_fished>0&&(n.effort={hours_fished:r.hours_fished}),r.gear_entries&&r.gear_entries.length>0&&(n.gearDetail=r.gear_entries.flatMap(e=>e.gear_details.map(s=>({gear_code:e.gear_code,detail_name:s.detail_name,detail_value:s.detail_value}))))),E&&a.gear_entries.length>0&&(n.lastw=a.gear_entries.map(e=>({gear_code:e.gear_code,days_fished:e.days_used}))),console.log("Submitting API payload:",JSON.stringify(n,null,2));let d=await (0,y.DE)(n);console.log("API Response:",d),(0,j.nZ)("flouca_submissions"),(0,j.nZ)("flouca_submissions_timestamp"),A({type:"success",message:"Form submitted successfully! Your data has been recorded."}),U(!0),R()}catch(s){console.error("Error submitting form:",s);let e="There was an error submitting the form. Please try again.";s instanceof Error?e=s.message:"object"==typeof s&&null!==s&&(e=JSON.stringify(s)),A({type:"error",message:e}),U(!0)}};return i?r.jsx("div",{className:"flex justify-center py-10",children:r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):c?r.jsx("div",{className:"container mx-auto p-6",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:[r.jsx("p",{children:c}),r.jsx("button",{onClick:()=>u(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md",children:"Try Again"})]})}):(0,r.jsxs)("div",{className:"container mx-auto p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Landing Form"}),r.jsx("div",{className:"w-72",children:r.jsx(_.Z,{ports:l})})]}),(0,r.jsxs)("form",{onSubmit:g(Q),className:"space-y-6",children:[r.jsx(o.Z,{required:!1,onChange:B},`boat-info-${G}`),r.jsx(f,{required:!1,onChange:J,gears:s},`effort-last-week-${G}`),r.jsx(h,{required:!1,onChange:V,gears:s},`effort-today-${G}`),L&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(q,{required:!0,onChange:H},`map-markers-${G}`),r.jsx(w,{required:!0,selectedLocation:k,todaysGears:S,gears:s,species:t,onChange:K},`fishing-details-${G}`)]}),r.jsx(p.Z,{isSubmitting:P,disabled:!(!L&&!E||!L||I.location&&I.fishingDetails),label:"Submit"})]}),Z&&r.jsx(b.Z,{type:Z.type,message:Z.message,isVisible:W,onClose:z})]})}},3353:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let r=t(1174);t(326),t(7577);let a=r._(t(7028));function l(e,s){var t;let r={loading:e=>{let{error:s,isLoading:t,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let l={...r,...s};return(0,a.default)({...l,modules:null==(t=l.loadableGenerated)?void 0:t.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},933:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=t(4129);function a(e){let{reason:s,children:t}=e;throw new r.BailoutToCSRError(s)}},7028:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return o}});let r=t(326),a=t(7577),l=t(933),i=t(6618);function n(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},o=function(e){let s={...d,...e},t=(0,a.lazy)(()=>s.loader().then(n)),o=s.loading;function c(e){let n=o?(0,r.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,d=s.ssr?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.PreloadCss,{moduleIds:s.modules}),(0,r.jsx)(t,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(t,{...e})});return(0,r.jsx)(a.Suspense,{fallback:n,children:d})}return c.displayName="LoadableComponent",c}},6618:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadCss",{enumerable:!0,get:function(){return l}});let r=t(326),a=t(4580);function l(e){let{moduleIds:s}=e,t=(0,a.getExpectedRequestStore)("next/dynamic css"),l=[];if(t.reactLoadableManifest&&s){let e=t.reactLoadableManifest;for(let t of s){if(!e[t])continue;let s=e[t].files.filter(e=>e.endsWith(".css"));l.push(...s)}}return 0===l.length?null:(0,r.jsx)(r.Fragment,{children:l.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:t.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},2535:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\Users\johnn\WebstormProjects\Floucca\floucca_front\app\dataoperator\forms\effort-and-landing\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,481,621,99,308,51],()=>t(1545));module.exports=r})();