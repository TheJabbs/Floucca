(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{73322:function(e,s,t){Promise.resolve().then(t.bind(t,48377))},48377:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var a=t(57437),l=t(2265),r=t(55775),n=t.n(r),i=t(29501),d=t(41247),o=t(20907),c=t(69626),u=t(43728),m=t(25361),g=e=>{let{required:s=!1,gears:t,control:r}=e,[n,d]=(0,l.useState)(0),[o,g]=(0,l.useState)({}),{fields:f,append:x,remove:h}=(0,i.Dq)({control:r,name:"effortToday.gear_entries"}),p=e=>{d(Number(e)),g({})},b=(e,s)=>{g(t=>({...t,[e]:s}))},y=()=>{if(0===n)return;let e=t.find(e=>e.gear_code===n);e&&(x({gear_code:n,gear_details:Object.entries(o).map(s=>{let[t,a]=s;return{detail_name:t,detail_value:a,equipment_id:e.equipment_id||""}})}),d(0),g({}))},_=()=>{let e=t.filter(e=>e.gear_code===n);return 0===e.length?[]:e.map(e=>({equipment_id:e.equipment_id,equipment_name:e.equipment_name,type:"number"}))},j=e=>{var s;return(null===(s=t.find(s=>s.gear_code===e))||void 0===s?void 0:s.gear_name)||""},v=()=>_().every(e=>{var s;return null===(s=o[e.equipment_name])||void 0===s?void 0:s.trim()}),N=t.filter(e=>!f.some(s=>s.gear_code===e.gear_code)),w=Array.from(new Set(N.map(e=>e.gear_code))).map(e=>{let s=N.find(s=>s.gear_code===e);return{gear_code:e,gear_name:(null==s?void 0:s.gear_name)||""}});return(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-6 space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 text-gray-600",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Effort Today"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(i.Qr,{name:"effortToday.hours_fished",control:r,rules:{min:{value:0,message:"Hours must be between 0 and 24"},max:{value:24,message:"Hours must be between 0 and 24"}},render:e=>{let{field:t,fieldState:{error:l}}=e;return(0,a.jsxs)("div",{className:"form-group mb-2 w-full",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Hours Fished Today",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",min:0,max:24,placeholder:"(1-24 hours)",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ".concat(l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),...t,onChange:e=>t.onChange(Number(e.target.value)||0)}),l&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.message})]})}})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Fishing Gear Details",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("select",{value:n,onChange:e=>p(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",disabled:f.length===t.length,children:[(0,a.jsx)("option",{value:0,children:"Select Gear"}),w.map(e=>(0,a.jsx)("option",{value:e.gear_code,children:e.gear_name},e.gear_code))]}),0!==n&&(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:_().map(e=>(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:e.equipment_id}),(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e.equipment_name}),(0,a.jsx)("input",{type:e.type,value:o[e.equipment_name]||"",onChange:s=>b(e.equipment_name,s.target.value),onKeyDown:e=>{("-"===e.key||"e"===e.key)&&e.preventDefault()},min:0,className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter ".concat(e.equipment_name.toLowerCase())}),(0,a.jsxs)("button",{onClick:y,disabled:!v(),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",type:"button",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Add Gear"]})]})},e.equipment_id))})]})]}),f.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:"Added Gear"}),(0,a.jsx)("div",{className:"divide-y divide-gray-100 space-y-3",children:f.map((e,s)=>(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:j(e.gear_code)}),(0,a.jsx)("div",{className:"text-sm text-gray-600 flex flex-wrap gap-2",children:e.gear_details.map(e=>(0,a.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded-md flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-1 rounded",children:e.equipment_id}),(0,a.jsxs)("span",{className:"font-medium",children:[e.detail_name,":"]}),e.detail_value]},e.detail_name))})]}),(0,a.jsx)("button",{onClick:()=>h(s),className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})]})},e.id))})]}):(0,a.jsxs)("div",{className:"text-gray-500 italic text-center py-3 flex items-center justify-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"No gear added yet."]})]})]})},f=e=>{let{required:s=!1,gears:t,control:r}=e,[n,d]=(0,l.useState)({gear_code:0,days_used:1}),{fields:o,append:g,remove:f}=(0,i.Dq)({control:r,name:"effortLastWeek.gear_entries"}),x=e=>{d(s=>({...s,gear_code:Number(e)}))},h=t.filter(e=>!o.some(s=>s.gear_code===e.gear_code)),p=e=>{var s;return(null===(s=t.find(s=>s.gear_code===e))||void 0===s?void 0:s.gear_name)||""},b=0===n.gear_code||n.days_used<1||n.days_used>7;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-6 space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 text-gray-600",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Effort Last Week"})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Select Gear Used Last Week",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:n.gear_code,onChange:e=>x(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",disabled:0===h.length,children:[(0,a.jsx)("option",{value:0,children:"Select Gear"}),h.map(e=>(0,a.jsx)("option",{value:e.gear_code,children:e.gear_name},e.gear_code))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Days Used Last Week",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"number",min:1,max:7,value:n.days_used,onChange:e=>{let s=parseInt(e.target.value)||1;s>=1&&s<=7&&d(e=>({...e,days_used:s}))},placeholder:"1 to 7",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:"(1-7 days)"})]})]})]}),(0,a.jsxs)("button",{onClick:()=>{0===n.gear_code||n.days_used<1||n.days_used>7||(g(n),d({gear_code:0,days_used:1}))},disabled:b,className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",type:"button",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Add Gear Usage"]})]}),o.length>0?(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:"Added Gear Usage"}),(0,a.jsx)("div",{className:"divide-y divide-gray-100 space-y-3",children:o.map((e,s)=>(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:p(e.gear_code)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Used for ",e.days_used," day",e.days_used>1?"s":""," last week"]})]}),(0,a.jsx)("button",{onClick:()=>f(s),className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})]})},e.id))})]}):(0,a.jsxs)("div",{className:"text-gray-500 italic text-center py-1 flex items-center justify-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"No gear usage recorded yet."]})]})]})},x=t(2603),h=t(99776),p=t(29447),b=t(17136),y=t(5108),_=t(44578),j=t(44986);let v=(0,t(96471).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var N=e=>{let{required:s=!1,control:t,gears:r,species:n}=e,[d,o]=(0,l.useState)(""),[m,g]=(0,l.useState)(!1),[f,x]=(0,l.useState)(null),[h,p]=(0,l.useState)({gear_code:0,specie_code:0,fish_weight:0,fish_length:0,fish_quantity:0,price:0}),b=(0,i.qo)({control:t,name:"location"}),y=(0,i.qo)({control:t,name:"effortToday.gear_entries"})||[],{fields:_,append:N,remove:w}=(0,i.Dq)({control:t,name:"fishingDetails.fish_entries"}),k=e=>{p(s=>({...s,specie_code:e.specie_code})),x(e),g(!1),o("")},q=(e,s)=>{p(t=>({...t,[e]:s}))},C=()=>{let{gear_code:e,specie_code:s,fish_weight:t,fish_length:a,fish_quantity:l,price:r}=h;return e>0&&s>0&&t>0&&a>0&&l>0&&r>0},D=e=>{let s=r.find(s=>s.gear_code===e);if(s)return s.gear_name;let t=y.find(s=>s.gear_code===e);return t?"Gear ".concat(t.gear_code):"Unknown Gear (".concat(e,")")},S=e=>{let s=n.find(s=>s.specie_code===e);return s?s.specie_name:"Species ".concat(e)},P=n.filter(e=>e.specie_name.toLowerCase().includes(d.toLowerCase()));(0,l.useEffect)(()=>{function e(e){e.target.closest(".species-dropdown")||g(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let T=e=>{("-"===e.key||"e"===e.key)&&e.preventDefault()};return b?(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 text-gray-600",children:(0,a.jsxs)("h2",{className:"text-xl font-semibold",children:["Fishing Details Today",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]})}),(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,a.jsx)("span",{className:"font-medium",children:b.name}),(0,a.jsxs)("span",{className:"text-blue-600",children:["(",b.lat.toFixed(4),", ",b.lng.toFixed(4),")"]})]})}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:["Fishing Gear ",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:h.gear_code,onChange:e=>q("gear_code",Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[(0,a.jsx)("option",{value:0,children:"Select Gear"}),y.map(e=>(0,a.jsx)("option",{value:e.gear_code,children:D(e.gear_code)},e.gear_code))]})]}),(0,a.jsxs)("div",{className:"form-group species-dropdown",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:["Fish Species ",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white flex items-center justify-between cursor-pointer",onClick:()=>g(!m),children:f?(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("span",{children:f.specie_name}),(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),x(null),q("specie_code",0)},className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(j.Z,{size:16})})]}):(0,a.jsx)("span",{className:"text-gray-500",children:"Search for species..."})}),m&&(0,a.jsxs)("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[(0,a.jsx)("div",{className:"sticky top-0 bg-white p-2 border-b",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:d,onChange:e=>o(e.target.value),placeholder:"Search species...",className:"w-full pl-8 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:e=>e.stopPropagation()}),(0,a.jsx)(v,{className:"absolute left-2 top-2.5 text-gray-400",size:16})]})}),0===P.length?(0,a.jsx)("div",{className:"p-3 text-center text-gray-500",children:"No species found"}):P.map(e=>(0,a.jsx)("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",onClick:s=>{s.preventDefault(),s.stopPropagation(),k(e)},children:e.specie_name},e.specie_code))]})]})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:["Weight (kg) ",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:h.fish_weight||"",onChange:e=>q("fish_weight",Number(e.target.value)),min:0,onInput:e=>{let s=e.currentTarget;0>parseFloat(s.value)&&(s.value="0")},onKeyDown:T,placeholder:"Fish weight",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:["Length (cm) ",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:h.fish_length||"",onInput:e=>{let s=e.currentTarget;0>parseFloat(s.value)&&(s.value="0")},onChange:e=>q("fish_length",Number(e.target.value)),onKeyDown:T,min:0,placeholder:"Fish length",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:["Quantity ",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:h.fish_quantity||"",onInput:e=>{let s=e.currentTarget;1>parseFloat(s.value)&&(s.value="1")},onChange:e=>q("fish_quantity",Number(e.target.value)),onKeyDown:T,min:1,placeholder:"Fish quantity",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:["Price (LBP) ",s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:h.price||"",onChange:e=>q("price",Number(e.target.value)),min:0,onInput:e=>{let s=e.currentTarget;0>parseFloat(s.value)&&(s.value="0")},onKeyDown:T,placeholder:"Enter price",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("button",{onClick:()=>{b&&C()&&(N({location_id:b.id,...h}),p({gear_code:0,specie_code:0,fish_weight:0,fish_length:0,fish_quantity:0,price:0}),x(null))},disabled:!C(),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",type:"button",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Add Entry"]})]}),_.length>0?(0,a.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700",children:"Added Entries"}),(0,a.jsx)("div",{className:"divide-y divide-gray-100 space-y-3",children:_.map((e,s)=>(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 flex-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"text-gray-900 ",children:S(e.specie_code)})}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"text-gray-600 ",children:D(e.gear_code)})}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsxs)("span",{className:"text-gray-600 truncate",children:[e.fish_weight,"kg, ",e.fish_quantity," fish"]})}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsxs)("span",{className:"text-gray-600 truncate",children:[e.fish_length,"cm"]})}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsxs)("span",{className:"text-gray-600 truncate",children:[e.price," LBP"]})})]}),(0,a.jsx)("button",{onClick:()=>w(s),className:"p-2 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50 transition-colors",type:"button",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})]})},e.id))})]}):(0,a.jsx)("div",{className:"text-gray-500 italic text-center py-1",children:"No fish entries added yet."})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 text-gray-600",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Fishing Details Today"})}),(0,a.jsx)("p",{className:"mt-4 text-gray-500 italic flex items-center gap-2",children:"Please select a location on the map first."})]})};let w=n()(()=>Promise.all([t.e(641),t.e(212),t.e(749)]).then(t.bind(t,77749)),{loadableGenerated:{webpack:()=>[77749]},ssr:!1});var k=function(){var e,s,t;let{selectedPort:r}=(0,h.A)(),{gears:n,species:c,ports:u,isLoading:m,error:j,refetch:v}=(0,d.P)(),[k,q]=(0,l.useState)(null),[C,D]=(0,l.useState)(!1),{handleSubmit:S,setValue:P,control:T,reset:L,formState:{isSubmitting:F}}=(0,i.cI)({mode:"onChange",defaultValues:{port:r,boatData:{fleet_owner:"",fleet_registration:0,fleet_hp:0,fleet_crew:0,fleet_max_weight:0,fleet_length:0},effortToday:{hours_fished:0,gear_entries:[]},effortLastWeek:{gear_entries:[]},location:null,fishingDetails:{fish_entries:[]}}}),E=(0,i.qo)({control:T}),Z=!!(null==E?void 0:null===(e=E.effortToday)||void 0===e?void 0:e.hours_fished)&&(null!==(t=null==E?void 0:null===(s=E.effortToday)||void 0===s?void 0:s.gear_entries)&&void 0!==t?t:[]).length>0;(0,l.useEffect)(()=>{P("port",r)},[r,P]);let G=()=>{L({port:r,boatData:{fleet_owner:"",fleet_registration:0,fleet_hp:0,fleet_crew:0,fleet_max_weight:0,fleet_length:0},effortToday:{hours_fished:0,gear_entries:[]},effortLastWeek:{gear_entries:[]},location:null,fishingDetails:{fish_entries:[]}})},O=async e=>{try{if(q(null),D(!1),!e.port)throw Error("Port must be selected");let s={form:{port_id:e.port,user_id:1,fisher_name:e.boatData.fleet_owner},boat_details:{fleet_owner:e.boatData.fleet_owner||"Unknown",fleet_registration:e.boatData.fleet_registration||0,fleet_hp:e.boatData.fleet_hp||0,fleet_crew:e.boatData.fleet_crew||0,fleet_max_weight:e.boatData.fleet_max_weight||0,fleet_length:e.boatData.fleet_length||0}};e.location&&(s.landing={latitude:e.location.lat,longitude:e.location.lng}),Z&&(e.fishingDetails.fish_entries.length>0&&(s.fish=e.fishingDetails.fish_entries.map(e=>({specie_code:e.specie_code,gear_code:e.gear_code,fish_weight:e.fish_weight,fish_length:e.fish_length,fish_quantity:e.fish_quantity,price:e.price||0}))),e.effortToday.hours_fished>0&&e.effortToday.hours_fished<=24&&(s.effort={hours_fished:e.effortToday.hours_fished}),e.effortToday.gear_entries.length>0&&(s.gearDetail=e.effortToday.gear_entries.flatMap(e=>e.gear_details.map(s=>({gear_code:e.gear_code,detail_name:s.detail_name,detail_value:s.detail_value}))))),e.effortLastWeek.gear_entries.length>0&&(s.lastw=e.effortLastWeek.gear_entries.map(e=>({gear_code:e.gear_code,days_fished:e.days_used}))),console.log("Submitting API payload:",JSON.stringify(s,null,2));let t=await (0,y.DE)(s);console.log("API Response:",t),(0,_.nZ)("flouca_submissions"),(0,_.nZ)("flouca_submissions_timestamp"),q({type:"success",message:"Form submitted successfully! Your data has been recorded."}),D(!0),G()}catch(s){console.error("Error submitting form:",s);let e="There was an error submitting the form. Please try again.";s instanceof Error&&(e=s.message),q({type:"error",message:e}),D(!0)}};return m?(0,a.jsx)("div",{className:"flex justify-center py-10",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):j?(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:[(0,a.jsx)("p",{children:j}),(0,a.jsx)("button",{onClick:()=>v(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md",children:"Try Again"})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Landing Form"}),(0,a.jsx)("div",{className:"w-72",children:(0,a.jsx)(p.Z,{ports:u})})]}),(0,a.jsxs)("form",{onSubmit:S(O),className:"space-y-6",children:[(0,a.jsx)(o.Z,{required:!1,control:T}),(0,a.jsx)(f,{required:!1,control:T,gears:n}),(0,a.jsx)(g,{required:!1,control:T,gears:n}),Z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w,{required:!0,control:T,setValue:P}),(0,a.jsx)(N,{required:!0,control:T,gears:n,species:c})]}),(0,a.jsx)(x.Z,{isSubmitting:F,disabled:!(()=>{if(!(null==E?void 0:E.port))return!1;if(Z){var e,s;return!!(null==E?void 0:E.location)&&(null!==(s=null==E?void 0:null===(e=E.fishingDetails)||void 0===e?void 0:e.fish_entries)&&void 0!==s?s:[]).length>0}return!0})(),label:"Submit"})]}),k&&(0,a.jsx)(b.Z,{type:k.type,message:k.message,isVisible:C,onClose:()=>{D(!1)}})]})}},55775:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return r}});let a=t(47043);t(57437),t(2265);let l=a._(t(15602));function r(e,s){var t;let a={loading:e=>{let{error:s,isLoading:t,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let r={...a,...s};return(0,l.default)({...r,modules:null==(t=r.loadableGenerated)?void 0:t.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},81523:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let a=t(18993);function l(e){let{reason:s,children:t}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(s);return t}},15602:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return o}});let a=t(57437),l=t(2265),r=t(81523),n=t(70049);function i(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},o=function(e){let s={...d,...e},t=(0,l.lazy)(()=>s.loader().then(i)),o=s.loading;function c(e){let i=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,d=s.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(n.PreloadCss,{moduleIds:s.modules}):null,(0,a.jsx)(t,{...e})]}):(0,a.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(t,{...e})});return(0,a.jsx)(l.Suspense,{fallback:i,children:d})}return c.displayName="LoadableComponent",c}},70049:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadCss",{enumerable:!0,get:function(){return r}});let a=t(57437),l=t(20544);function r(e){let{moduleIds:s}=e;if("undefined"!=typeof window)return null;let t=(0,l.getExpectedRequestStore)("next/dynamic css"),r=[];if(t.reactLoadableManifest&&s){let e=t.reactLoadableManifest;for(let t of s){if(!e[t])continue;let s=e[t].files.filter(e=>e.endsWith(".css"));r.push(...s)}}return 0===r.length?null:(0,a.jsx)(a.Fragment,{children:r.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:t.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[464,30,944,971,117,744],function(){return e(e.s=73322)}),_N_E=e.O()}]);