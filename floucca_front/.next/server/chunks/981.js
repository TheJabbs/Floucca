exports.id=981,exports.ids=[981],exports.modules={90478:(e,t,r)=>{Promise.resolve().then(r.bind(r,17191))},19574:(e,t,r)=>{Promise.resolve().then(r.bind(r,65508))},85619:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},17191:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(10326),a=r(17577),l=r(77449),n=r(6266),i=r(62652),o=r(91118),c=r(31798),d=r(14711),u=r(14370),x=r(39255);let m="flouca_stats_panel",h=()=>{let[e,t]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[p,f]=(0,a.useState)(!0),[y,b]=(0,a.useState)(null),[v,j]=(0,a.useState)({}),[N,S]=(0,a.useState)(null),[w,_]=(0,a.useState)(!1),[$,T]=(0,a.useState)(null),P=async(e=!1)=>{try{if(f(!0),b(null),!e){let e=(0,x.TK)(m,9e5);if(e){if(console.log("Using cached stats data"),g(e),(0,x.kI)(m,9e5)){let e=localStorage.getItem(`${m}_timestamp`);T(e?parseInt(e,10):null)}f(!1);let t=Object.keys(e).reduce((e,t)=>(e[t]=!0,e),{});j(t);return}}console.log("Fetching fresh stats data");let t=process.env.NEXT_PUBLIC_API_URL,r=await fetch(`${t}/api/dev/formulas/report/leftPanel`);if(!r.ok)throw Error("Failed to fetch statistics");let s=await r.json();g(s),(0,x.cW)(m,s),T(Date.now());let a=Object.keys(s).reduce((e,t)=>(e[t]=!0,e),{});j(a)}catch(e){b(e instanceof Error?e.message:"Unknown error occurred")}finally{f(!1)}};(0,a.useEffect)(()=>{P()},[]);let E=e=>{j(t=>({...t,[e]:!t[e]}))},F=e=>{S(e),_(!1)},I=()=>{P(!0)},L=e=>{let t=new Date(e),r=t.toLocaleString("default",{month:"short"}),s=t.getFullYear();return`${r} ${s}`},O=e=>{if(!h||!h[e])return[];let t=h[e];return[{type:"Ports",records:t.strata.port},{type:"Coops",records:t.strata.coop},{type:"Regions",records:t.strata.region},{type:"Species",records:t.speciesKind},{type:"Effort Records",records:t.effortRecord},{type:"Landing Records",records:t.landingRecord},{type:"Total Gears",records:t.totalGears},{type:"Sample Catch",records:t.sampleCatch}]};if(p&&!h&&e)return s.jsx("div",{className:"bg-white border-r border-gray-200 h-full flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})});let C=h?Object.keys(h).sort((e,t)=>new Date(t).getTime()-new Date(e).getTime()):[];return s.jsx("div",{className:`bg-white border-r border-gray-200 h-full overflow-y-auto transition-all duration-300 ${e?"w-64":"w-14"} ${p?"opacity-70":"opacity-100"}`,onMouseEnter:()=>{r||t(!0)},onMouseLeave:()=>{r||t(!1)},children:(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[!e&&(0,s.jsxs)("div",{className:"flex flex-col items-center p-3",children:[s.jsx(n.Z,{className:"h-6 w-6 text-blue-600"}),s.jsx("span",{className:"mt-1 text-xs text-gray-600 font-medium",children:"Stats"})]}),e&&(0,s.jsxs)("div",{className:"flex flex-col h-full p-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(n.Z,{className:"h-5 w-5 text-blue-600 mr-2"}),s.jsx("h2",{className:"font-semibold text-lg",children:"Statistics"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>{l(!r),t(!0)},className:`p-1.5 rounded-full hover:bg-gray-100 ${r?"text-blue-600 bg-blue-50":"text-gray-500"}`,title:r?"Unpin panel":"Pin panel",children:s.jsx(i.Z,{size:16,className:r?"fill-blue-600":""})}),s.jsx("button",{onClick:()=>{_(!w)},className:"p-1.5 rounded-full hover:bg-gray-100 text-gray-500",title:"Filter by period",children:s.jsx(o.Z,{size:16})}),s.jsx("button",{onClick:I,className:"p-1.5 rounded-full hover:bg-gray-100 text-gray-500",title:"Refresh data",disabled:p,children:s.jsx(c.Z,{size:16,className:p?"animate-spin":""})})]})]}),$&&(0,s.jsxs)("div",{className:"mb-2 text-xs text-gray-500",children:["Last updated: ",new Date($).toLocaleString()]}),y&&(0,s.jsxs)("div",{className:"mb-4 p-2 bg-red-50 text-red-700 rounded border border-red-200 text-sm",children:[y,s.jsx("button",{className:"ml-2 text-red-600 hover:text-red-800 underline text-xs",onClick:I,children:"Retry"})]}),w&&(0,s.jsxs)("div",{className:"mb-4 p-2 bg-gray-50 rounded border",children:[s.jsx("div",{className:"font-medium mb-2 text-sm",children:"Filter by period:"}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("div",{className:`cursor-pointer p-1 rounded text-sm ${null===N?"bg-blue-100 text-blue-800":"hover:bg-gray-100"}`,onClick:()=>F(null),children:"All periods"}),C.map(e=>s.jsx("div",{className:`cursor-pointer p-1 rounded text-sm ${N===e?"bg-blue-100 text-blue-800":"hover:bg-gray-100"}`,onClick:()=>F(e),children:L(e)},e))]})]}),s.jsx("div",{className:"flex-grow overflow-y-auto",children:null===N?s.jsx("div",{className:"space-y-2",children:C.map(e=>(0,s.jsxs)("div",{className:"border rounded overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-blue-50 cursor-pointer",onClick:()=>E(e),children:[s.jsx("span",{className:"font-semibold text-blue-700",children:L(e)}),v[e]?s.jsx(d.Z,{size:16,className:"text-blue-700"}):s.jsx(u.Z,{size:16,className:"text-blue-700"})]}),v[e]&&s.jsx("div",{className:"border-t",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-3 py-1.5 text-left text-xs font-medium text-gray-500",children:"Data type"}),s.jsx("th",{className:"px-3 py-1.5 text-right text-xs font-medium text-gray-500",children:"Records"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:O(e).map((t,r)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-1.5 text-sm text-gray-700",children:t.type}),s.jsx("td",{className:"px-3 py-1.5 text-sm text-gray-700 text-right",children:t.records})]},`${e}-${t.type}-${r}`))})]})})]},e))}):(0,s.jsxs)("div",{className:"border rounded overflow-hidden",children:[s.jsx("div",{className:"bg-blue-50 p-2",children:s.jsx("span",{className:"font-semibold text-blue-700",children:L(N)})}),(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-3 py-1.5 text-left text-xs font-medium text-gray-500",children:"Data type"}),s.jsx("th",{className:"px-3 py-1.5 text-right text-xs font-medium text-gray-500",children:"Records"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:O(N).map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-1.5 text-sm text-gray-700",children:e.type}),s.jsx("td",{className:"px-3 py-1.5 text-sm text-gray-700 text-right",children:e.records})]},t))})]})]})})]})]})})};function g({children:e}){return s.jsx(l.v,{children:(0,s.jsxs)("div",{className:"flex h-full",children:[s.jsx("div",{className:"flex h-screen",children:s.jsx(h,{})}),s.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:e})]})})}},65508:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(10326);r(17577);var a=r(83040),l=r(90434);function n(){return s.jsx("header",{className:"bg-white border-b",children:s.jsx("div",{className:"container mx-auto px-4 py-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)(l.default,{href:"/",className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx(a.Z,{className:"h-8 w-8 text-blue-600"}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-blue-600 tracking-tight",children:"FLOUCA"}),s.jsx("p",{className:"text-sm text-gray-500 -mt-1",children:"Fish Landing System"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"University of Balamand"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Koura Campus"}),s.jsx("p",{className:"text-sm text-gray-600",children:"example@balamand.edu.lb"}),s.jsx("p",{className:"text-sm text-gray-600",children:"+961 000 000"})]})]})})})}},39255:(e,t,r)=>{"use strict";function s(e,t=36e5){try{let r=`${e}_timestamp`,s=localStorage.getItem(r);if(!s)return!1;let a=parseInt(s,10);return Date.now()-a<t}catch(e){return console.error("Error checking cache validity:",e),!1}}function a(e,t=36e5){try{if(!s(e,t))return null;let r=localStorage.getItem(e);if(!r)return null;return JSON.parse(r)}catch(e){return console.error("Error retrieving from cache:",e),null}}function l(e,t){try{let r=`${e}_timestamp`;localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem(r,Date.now().toString())}catch(e){console.error("Error saving to cache:",e)}}function n(e){try{let t=`${e}_timestamp`;localStorage.removeItem(e),localStorage.removeItem(t)}catch(e){console.error("Error removing from cache:",e)}}r.d(t,{TK:()=>a,cW:()=>l,kI:()=>s,nZ:()=>n})},77449:(e,t,r)=>{"use strict";r.d(t,{B:()=>c,v:()=>d});var s=r(10326),a=r(17577),l=r(89570),n=r(44337);let i={STATS_GEARS:"flouca_stats_gears",STATS_PORTS:"flouca_stats_ports",STATS_REGIONS:"flouca_stats_regions",STATS_COOPS:"flouca_stats_coops",STATS_PERIODS:"flouca_stats_periods"},o=(0,a.createContext)(void 0);function c(){let e=(0,a.useContext)(o);if(!e)throw Error("useStatsData must be used within a StatsDataProvider");return e}function d({children:e}){let t=(0,n.N)(l.Z7,i.STATS_GEARS),r=(0,n.N)(l.LH,i.STATS_PORTS),a=(0,n.N)(l.JL,i.STATS_REGIONS),c=(0,n.N)(l.V$,i.STATS_COOPS),d=(0,n.N)(l.Kh,i.STATS_PERIODS),u=d.data.map(e=>({value:e.period_date,label:`${(0,n.f)(e.period_date).split(" ")[0]} ${e.period_status}`})),x=async()=>{await Promise.all([t.refetch(),r.refetch(),a.refetch(),c.refetch(),d.refetch()])},m=t.isLoading||r.isLoading||a.isLoading||c.isLoading||d.isLoading,h=t.error||r.error||a.error||c.error||d.error,g=[t.lastFetched,r.lastFetched,a.lastFetched,c.lastFetched,d.lastFetched].filter(Boolean),p=g.length>0?Math.max(...g):null,f={gears:t.data,ports:r.data,regions:a.data,coops:c.data,periods:d.data,formattedPeriods:u,isLoading:m,error:h,lastFetched:p,refetch:x};return s.jsx(o.Provider,{value:f,children:e})}},44337:(e,t,r)=>{"use strict";r.d(t,{N:()=>n,f:()=>l});var s=r(17577),a=r(39255);let l=e=>{let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getFullYear()} ${t.getHours?t.getHours():""} ${e.includes("T")?e.split("T")[1].split(".")[0].substring(0,5):""}`.trim()},n=(e,t,r=36e5)=>{let[l,n]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[u,x]=(0,s.useState)(null),m=async()=>{try{o(!0),d(null),console.log(`Fetching fresh data for ${t}...`);let r=await e();n(r),(0,a.cW)(t,r),x(Date.now()),console.log(`Fresh data for ${t} fetched and cached successfully`)}catch(e){console.error(`Error fetching data for ${t}:`,e),d(`Failed to load ${t} data. Please try again.`)}finally{o(!1)}};return(0,s.useEffect)(()=>{(async()=>{let e=(0,a.TK)(t,r);if(e){console.log(`Data for ${t} loaded from cache successfully`),n(e);let r=localStorage.getItem(`${t}_timestamp`);x(r?parseInt(r,10):null),o(!1)}else await m()})()},[t]),{data:l,isLoading:i,error:c,lastFetched:u,refetch:m}}},86890:(e,t,r)=>{"use strict";r.d(t,{x1:()=>l,zG:()=>n});var s=r(44099);let a=process.env.NEXT_PUBLIC_API_URL,l=s.Z.create({baseURL:a,headers:{"Content-Type":"application/json"}}),n=(e,t)=>{if(console.error(`Error ${t}:`,e),s.Z.isAxiosError(e)&&e.response){if(console.error("Error response data:",e.response.data),console.error("Error response status:",e.response.status),e.response.data&&"object"==typeof e.response.data)throw{message:e.response.data.message||`Server error (${t})`,statusCode:e.response.status,details:e.response.data};throw Error(`Server error (${e.response.status}): ${e.message}`)}throw Error(`Failed to ${t}. Please check your connection and try again.`)}},89570:(e,t,r)=>{"use strict";r.d(t,{V$:()=>c,Z7:()=>l,Kh:()=>i,LH:()=>a,JL:()=>o,XZ:()=>n,PF:()=>u,DE:()=>d});var s=r(86890);let a=async()=>{try{return(await s.x1.get("/ports")).data}catch(e){return(0,s.zG)(e,"fetching ports")}},l=async()=>{try{return(await s.x1.get("/api/dev/gear/all/gear")).data}catch(e){return(0,s.zG)(e,"fetching gears")}},n=async()=>{try{return(await s.x1.get("/species/all")).data}catch(e){return(0,s.zG)(e,"fetching species")}},i=async()=>{try{return(await s.x1.get("/api/dev/period/all/period")).data}catch(e){return(0,s.zG)(e,"fetching periods")}},o=async()=>{try{return(await s.x1.get("/region/all")).data}catch(e){return(0,s.zG)(e,"fetching regions")}},c=async()=>{try{return(await s.x1.get("/api/coop/all")).data}catch(e){return(0,s.zG)(e,"fetching coops")}},d=async e=>{try{let t=JSON.parse(JSON.stringify(e));return console.log("Sending landing data to API:",JSON.stringify(t,null,2)),(await s.x1.post("/api/dev/landings/create/form",t)).data}catch(e){return(0,s.zG)(e,"submitting landing form")}},u=async e=>{try{let t=JSON.parse(JSON.stringify(e));return console.log("Sending fleet senses data to API:",JSON.stringify(t,null,2)),(await s.x1.post("/api/dev/fleet_senses/form/create",t)).data}catch(e){return(0,s.zG)(e,"submitting fleet senses form")}}},13321:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`D:\seniorproject\Floucca\Floucca\floucca_front\app\dashboard\layout.tsx#default`)},9813:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var s=r(19510),a=r(77366),l=r.n(a);let n=(0,r(68570).createProxy)(String.raw`D:\seniorproject\Floucca\Floucca\floucca_front\components\headers\form-header.tsx#default`);r(67272),r(71159);let i={title:"Flouca Web",description:"Flouca Web Fish Landing System"};function o({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:l().className,children:(0,s.jsxs)("div",{suppressHydrationWarning:!0,children:[s.jsx(n,{}),e]})})})}},57481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},67272:()=>{}};