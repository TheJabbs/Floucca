(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[349],{6164:function(t,e,r){Promise.resolve().then(r.bind(r,5524))},5524:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return o}});var a=r(7437);r(2265);var n=r(2203);function o(t){let{children:e}=t;return(0,a.jsx)(n.v,{children:e})}},6656:function(t,e,r){"use strict";function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36e5;try{let r=localStorage.getItem("".concat(t,"_timestamp"));if(!r)return!1;let a=parseInt(r,10);return Date.now()-a<e}catch(t){return console.error("Error checking cache validity:",t),!1}}function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36e5;try{if(!a(t,e))return null;let r=localStorage.getItem(t);if(!r)return null;return JSON.parse(r)}catch(t){return console.error("Error retrieving from cache:",t),null}}function o(t,e){try{let r="".concat(t,"_timestamp");localStorage.setItem(t,JSON.stringify(e)),localStorage.setItem(r,Date.now().toString())}catch(t){console.error("Error saving to cache:",t)}}function c(t){try{let e="".concat(t,"_timestamp");localStorage.removeItem(t),localStorage.removeItem(e)}catch(t){console.error("Error removing from cache:",t)}}r.d(e,{TK:function(){return n},cW:function(){return o},kI:function(){return a},nZ:function(){return c}})},2203:function(t,e,r){"use strict";r.d(e,{B:function(){return i},v:function(){return l}});var a=r(7437),n=r(2265),o=r(5397),c=r(4683);let s=(0,n.createContext)(void 0);function i(){let t=(0,n.useContext)(s);if(!t)throw Error("useStatsData must be used within a StatsDataProvider");return t}function l(t){let{children:e}=t,r=(0,c.N)(o.Z7,"flouca_stats_gears"),n=(0,c.N)(o.LH,"flouca_stats_ports"),i=(0,c.N)(o.JL,"flouca_stats_regions"),l=(0,c.N)(o.V$,"flouca_stats_coops"),u=(0,c.N)(o.Kh,"flouca_stats_periods"),f=(0,c.N)(o.XZ,"flouca_stats_species"),d=u.data.map(t=>({value:t.period_date,label:"".concat((0,c.f)(t.period_date).split(" ")[0]," ").concat(t.period_status)})),g=async()=>{await Promise.all([r.refetch(),n.refetch(),i.refetch(),l.refetch(),u.refetch(),f.refetch()])},h=r.isLoading||n.isLoading||i.isLoading||l.isLoading||u.isLoading||f.isLoading,p=r.error||n.error||i.error||l.error||u.error||f.error,y=[r.lastFetched,n.lastFetched,i.lastFetched,l.lastFetched,u.lastFetched,f.lastFetched].filter(Boolean),m=y.length>0?Math.max(...y):null,S={gears:r.data,ports:n.data,regions:i.data,coops:l.data,periods:u.data,species:f.data,formattedPeriods:d,isLoading:h,error:p,lastFetched:m,refetch:g};return(0,a.jsx)(s.Provider,{value:S,children:e})}},4683:function(t,e,r){"use strict";r.d(e,{N:function(){return c},f:function(){return o}});var a=r(2265),n=r(6656);let o=t=>{let e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getFullYear()," ").concat(e.getHours?e.getHours():""," ").concat(t.includes("T")?t.split("T")[1].split(".")[0].substring(0,5):"").trim()},c=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:36e5,[o,c]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[l,u]=(0,a.useState)(null),[f,d]=(0,a.useState)(null),g=async()=>{try{i(!0),u(null),console.log("Fetching fresh data for ".concat(e,"..."));let r=await t();c(r),(0,n.cW)(e,r),d(Date.now()),console.log("Fresh data for ".concat(e," fetched and cached successfully"))}catch(t){console.error("Error fetching data for ".concat(e,":"),t),u("Failed to load ".concat(e," data. Please try again."))}finally{i(!1)}};return(0,a.useEffect)(()=>{(async()=>{let t=(0,n.TK)(e,r);if(t){console.log("Data for ".concat(e," loaded from cache successfully")),c(t);let r=localStorage.getItem("".concat(e,"_timestamp"));d(r?parseInt(r,10):null),i(!1)}else await g()})()},[e]),{data:o,isLoading:s,error:l,lastFetched:f,refetch:g}}},4188:function(t,e,r){"use strict";r.d(e,{x1:function(){return n},zG:function(){return o}});var a=r(8472);let n=a.Z.create({baseURL:"http://localhost:4000",headers:{"Content-Type":"application/json"}}),o=(t,e)=>{if(console.error("Error ".concat(e,":"),t),a.Z.isAxiosError(t)&&t.response){if(console.error("Error response data:",t.response.data),console.error("Error response status:",t.response.status),t.response.data&&"object"==typeof t.response.data)throw{message:t.response.data.message||"Server error (".concat(e,")"),statusCode:t.response.status,details:t.response.data};throw Error("Server error (".concat(t.response.status,"): ").concat(t.message))}throw Error("Failed to ".concat(e,". Please check your connection and try again."))}},5397:function(t,e,r){"use strict";r.d(e,{V$:function(){return l},Z7:function(){return o},Kh:function(){return s},LH:function(){return n},JL:function(){return i},XZ:function(){return c},PF:function(){return f},DE:function(){return u}});var a=r(4188);let n=async()=>{try{return(await a.x1.get("/ports")).data}catch(t){return(0,a.zG)(t,"fetching ports")}},o=async()=>{try{return(await a.x1.get("/api/dev/gear/all/gear")).data}catch(t){return(0,a.zG)(t,"fetching gears")}},c=async()=>{try{return(await a.x1.get("/species/all")).data}catch(t){return(0,a.zG)(t,"fetching species")}},s=async()=>{try{return(await a.x1.get("/api/dev/period/all/period")).data}catch(t){return(0,a.zG)(t,"fetching periods")}},i=async()=>{try{return(await a.x1.get("/region/all")).data}catch(t){return(0,a.zG)(t,"fetching regions")}},l=async()=>{try{return(await a.x1.get("/api/coop/all")).data}catch(t){return(0,a.zG)(t,"fetching coops")}},u=async t=>{try{let e=JSON.parse(JSON.stringify(t));return console.log("Sending landing data to API:",JSON.stringify(e,null,2)),(await a.x1.post("/api/dev/landings/create/form",e)).data}catch(t){return(0,a.zG)(t,"submitting landing form")}},f=async t=>{try{let e=JSON.parse(JSON.stringify(t));return console.log("Sending fleet senses data to API:",JSON.stringify(e,null,2)),(await a.x1.post("/api/dev/fleet_senses/form/create",e)).data}catch(t){return(0,a.zG)(t,"submitting fleet senses form")}}}},function(t){t.O(0,[472,971,23,744],function(){return t(t.s=6164)}),_N_E=t.O()}]);